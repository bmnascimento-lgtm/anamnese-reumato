<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anamnese Reumatologia Inteligente</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f0f5f9;
            padding: 20px;
            color: #1e3c5c;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        h1 {
            color: #0a2942;
            margin-bottom: 20px;
            font-size: 2.2rem;
            border-bottom: 3px solid #4a90e2;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        h2 {
            background: #1e4a76;
            color: white;
            padding: 10px 15px;
            border-radius: 8px 8px 0 0;
            font-size: 1.3rem;
            margin-top: 20px;
            margin-bottom: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        h2 button {
            margin-left: auto;
            background: white;
            border: none;
            border-radius: 4px;
            padding: 4px 12px;
            font-size: 0.9rem;
            cursor: pointer;
            color: #1e4a76;
            font-weight: bold;
        }
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            background: #d9e6f2;
            padding: 15px;
            border-radius: 0 0 8px 8px;
            margin-bottom: 10px;
        }
        .item-card {
            background: white;
            border-radius: 8px;
            padding: 12px 15px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: 0.2s;
            border-left: 5px solid #4a90e2;
            flex-wrap: wrap;
        }
        .item-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transform: translateY(-2px);
        }
        .item-card input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #1e4a76;
        }
        .item-card label {
            font-weight: 600;
            cursor: pointer;
            flex-grow: 1;
            color: #0a2942;
            min-width: 120px;
        }
        .item-card input[type="text"], 
        .item-card input[type="number"] {
            border: 1px solid #b0c8da;
            border-radius: 4px;
            padding: 4px 8px;
            width: 90px;
            font-size: 0.9rem;
        }
        .item-card select {
            border: 1px solid #b0c8da;
            border-radius: 4px;
            padding: 4px;
            background: white;
        }
        .small-input {
            width: 70px !important;
        }
        .med-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
            width: 100%;
        }
        .double-col {
            grid-column: span 2;
        }
        .footer-actions {
            margin-top: 30px;
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .btn {
            background: #1e4a76;
            color: white;
            border: none;
            padding: 12px 28px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .btn:hover {
            background: #0a2942;
            transform: scale(1.02);
        }
        .btn.secondary {
            background: #6c757d;
        }
        .btn.secondary:hover {
            background: #495057;
        }
        .btn.success {
            background: #28a745;
        }
        .btn.success:hover {
            background: #218838;
        }
        .resumo-bar {
            background: white;
            border-radius: 50px;
            padding: 15px 25px;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 1.1rem;
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
            align-items: center;
        }
        .resumo-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .badge {
            background: #1e4a76;
            color: white;
            border-radius: 20px;
            padding: 4px 16px;
            font-weight: 600;
        }
        hr {
            margin: 20px 0;
            border: 1px dashed #b0c8da;
        }
        .obs-field {
            background: white;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #b0c8da;
            margin-bottom: 15px;
        }
        textarea {
            width: 100%;
            border: 1px solid #b0c8da;
            border-radius: 8px;
            padding: 12px;
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
        }
        .paciente-info {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            align-items: flex-end;
        }
        .info-field {
            display: flex;
            flex-direction: column;
            gap: 5px;
            min-width: 120px;
        }
        .info-field label {
            font-weight: 600;
            color: #1e4a76;
        }
        .info-field input, .info-field select {
            padding: 8px;
            border: 1px solid #b0c8da;
            border-radius: 6px;
            font-size: 1rem;
        }
        .imc-result {
            background: #e8f4fd;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        .imc-class {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }
        .hd-box {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border-left: 8px solid #4a90e2;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .hd-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #1e4a76;
            margin-bottom: 15px;
        }
        .sugestao-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin: 5px 0;
            border-left: 3px solid #ffc107;
        }
        .conduta-gerada {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-family: 'Segoe UI', monospace;
            white-space: pre-wrap;
            border: 1px solid #4a90e2;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>
            ü©∫ Anamnese Reumatologia Inteligente
            <span style="font-size:1rem; font-weight:normal; color:#4a90e2; margin-left:auto;">Clique e marque durante a consulta</span>
        </h1>

        <!-- Dados do Paciente -->
        <div class="paciente-info">
            <div class="info-field">
                <label>Sexo:</label>
                <select id="sexo" onchange="atualizarVisibilidadeFisiologico()">
                    <option value="">Selecione</option>
                    <option value="F">Feminino</option>
                    <option value="M">Masculino</option>
                </select>
            </div>
            <div class="info-field">
                <label>Ra√ßa/Cor:</label>
                <select id="raca">
                    <option value="">Selecione</option>
                    <option>Branca</option>
                    <option>Preta</option>
                    <option>Parda</option>
                    <option>Amarela</option>
                    <option>Ind√≠gena</option>
                </select>
            </div>
            <div class="info-field">
                <label>Idade (anos):</label>
                <input type="number" id="idade" min="0" max="120" step="1">
            </div>
            <div class="info-field">
                <label>Peso (kg):</label>
                <input type="number" id="peso" min="0" max="300" step="0.1" oninput="calcularIMC()">
            </div>
            <div class="info-field">
                <label>Altura (cm):</label>
                <input type="number" id="altura" min="0" max="250" step="1" oninput="calcularIMC()">
            </div>
            <div class="info-field">
                <label>IMC:</label>
                <div class="imc-result" id="imc">-</div>
                <div class="imc-class" id="imcClass"></div>
            </div>
        </div>

        <!-- Resumo din√¢mico -->
        <div class="resumo-bar" id="resumo">
            <span class="resumo-item"><span class="badge" id="totalMarcados">0</span> itens marcados</span>
            <span class="resumo-item">üìå Queixa: <span id="resumoQueixa" style="font-weight:600;">‚Äî</span></span>
            <span class="resumo-item">‚öïÔ∏è HD: <span id="resumoHD" style="font-weight:600;">‚Äî</span></span>
        </div>

        <!-- QUEIXA PRINCIPAL / HDA -->
        <div class="obs-field">
            <label style="font-weight:700; font-size:1.2rem;">üó£Ô∏è Queixa Principal / Hist√≥ria da Doen√ßa Atual:</label>
            <textarea id="queixaPrincipal" rows="2" placeholder="Descreva a queixa principal e HDA..." oninput="atualizarResumo()"></textarea>
        </div>

        <!-- SINAIS E SINTOMAS (vers√£o leiga) -->
        <h2>üîç SINAIS E SINTOMAS <button onclick="toggleAll('sinais', true)">Marcar todos</button><button onclick="toggleAll('sinais', false)" style="background:#f0f0f0; color:#333;">Limpar</button></h2>
        <div class="card-grid" id="sinais"></div>

        <!-- MEDICAMENTOS EM USO -->
        <h2>üíä MEDICAMENTOS EM USO</h2>
        <div class="card-grid" id="medicamentos"></div>

        <!-- COMORBIDADES e HIST√ìRICO -->
        <h2>üìã COMORBIDADES / ANTECEDENTES</h2>
        <div class="card-grid" id="comorbidades"></div>

        <!-- EXAME F√çSICO -->
        <h2>ü©ª EXAME F√çSICO</h2>
        <div class="card-grid">
            <div class="item-card double-col">
                <label>PA:</label>
                <input type="text" placeholder="Ex: 120x80" id="pa" style="width:120px;">
                <label style="margin-left:15px;">FC:</label>
                <input type="text" placeholder="bpm" id="fc" style="width:80px;">
                <label style="margin-left:15px;">FR:</label>
                <input type="text" placeholder="irpm" id="fr" style="width:80px;">
            </div>
            <div class="item-card double-col">
                <label>Temperatura:</label>
                <input type="text" placeholder="¬∞C" id="temp" style="width:80px;">
                <label style="margin-left:15px;">Sat O2:</label>
                <input type="text" placeholder="%" id="sat" style="width:80px;">
            </div>
            <div class="item-card double-col">
                <label>AC:</label>
                <input type="text" placeholder="RR 2T" id="ac" style="width:150px;">
                <label style="margin-left:15px;">AP:</label>
                <input type="text" placeholder="MV+ sem RA" id="ap" style="width:150px;">
            </div>
            <div class="item-card double-col">
                <label>Abdome:</label>
                <input type="text" placeholder="..." id="abdome" style="width:200px;">
                <label style="margin-left:15px;">Extremidades:</label>
                <input type="text" placeholder="Sem edema" id="extrem" style="width:150px;">
            </div>
        </div>

        <!-- HD Autom√°tica e Conduta -->
        <div class="hd-box" id="hdBox">
            <div class="hd-title">ü§ñ Hip√≥tese Diagn√≥stica (baseada nos sintomas)</div>
            <div id="sugestaoHD" class="sugestao-item">Preencha os sintomas para ver sugest√µes...</div>
            
            <div class="hd-title" style="margin-top:20px;">üìù Hip√≥tese Diagn√≥stica Final</div>
            <input type="text" id="hipotese" placeholder="Digite a hip√≥tese diagn√≥stica..." style="width:100%; padding:12px; border-radius:8px; border:1px solid #b0c8da; font-size:1rem; margin-bottom:10px;">
            
            <button class="btn success" onclick="gerarCondutaAutomatica()" style="margin:10px 0;">‚ö° Gerar Conduta Autom√°tica</button>
            
            <div class="hd-title" style="margin-top:20px;">üìã Conduta Gerada</div>
            <div id="condutaGerada" class="conduta-gerada">Clique em "Gerar Conduta Autom√°tica" ap√≥s definir a hip√≥tese...</div>
            
            <div class="hd-title" style="margin-top:20px;">üìù Conduta Final (edit√°vel)</div>
            <textarea id="conduta" rows="4" placeholder="A conduta gerada aparecer√° aqui. Voc√™ pode editar se necess√°rio..."></textarea>
        </div>

        <!-- ANTECEDENTES FISIOL√ìGICOS (vis√≠vel apenas para sexo feminino) -->
        <div id="antecedentesFeminino" style="display: none;">
            <h2>üß¨ ANTECEDENTES FISIOL√ìGICOS (Feminino)</h2>
            <div class="card-grid">
                <div class="item-card"><input type="checkbox" id="menopausa"><label for="menopausa">Menopausa</label></div>
                <div class="item-card"><input type="checkbox" id="reposHorm"><label for="reposHorm">Reposi√ß√£o Hormonal</label></div>
                <div class="item-card">
                    <label>Menstrua√ß√£o:</label>
                    <select id="menstruacao">
                        <option value="">--</option>
                        <option>Regular</option>
                        <option>Irregular</option>
                    </select>
                </div>
                <div class="item-card">
                    <label>Gesta√ß√µes: G</label><input type="number" id="g" class="small-input" min="0">
                    <label>P</label><input type="number" id="p" class="small-input" min="0">
                    <label>A</label><input type="number" id="a" class="small-input" min="0">
                </div>
                <div class="item-card">
                    <label>√öltima menstrua√ß√£o:</label>
                    <input type="text" id="dum" placeholder="data ou idade">
                </div>
            </div>
        </div>

        <!-- Bot√µes de a√ß√£o -->
        <div class="footer-actions">
            <button class="btn" onclick="gerarResumoCompleto()">üìã Gerar Resumo da Consulta (HDA)</button>
            <button class="btn secondary" onclick="limparTudo()">üîÑ Nova Consulta</button>
        </div>
        <div id="resumoFinal" style="margin-top:30px; background:#e9f0f9; padding:20px; border-radius:12px; display:none; white-space:pre-wrap; font-family: 'Segoe UI', monospace; font-size:1rem; line-height:1.6;"></div>
    </div>

    <script>
        // Lista de sintomas em vers√£o t√©cnica e leiga
        const sintomasLista = [
            {tecnico: "RASH MALAR", leigo: "Vermelhid√£o no rosto (asa de borboleta)"},
            {tecnico: "FOTOSSENSIBILIDADE", leigo: "Pele sens√≠vel ao sol, manchas com exposi√ß√£o solar"},
            {tecnico: "ULCERAS ORAIS", leigo: "Feridas na boca ou nariz"},
            {tecnico: "SEROSITE", leigo: "Dor no peito ao respirar (pleurisia) ou incha√ßo no cora√ß√£o"},
            {tecnico: "ANEMIA", leigo: "Cansa√ßo, palidez, fraqueza"},
            {tecnico: "ARTRITE PEQUENAS ARTICULA√á√ïES", leigo: "Dor e incha√ßo nas m√£os, punhos ou p√©s"},
            {tecnico: "ARTRITE GRANDES ARTICULA√á√ïES", leigo: "Dor e incha√ßo nos joelhos, ombros ou quadris"},
            {tecnico: "RIGIDEZ MATINAL >30 MIN", leigo: "Dura√ß√£o do travamento ao acordar por mais de 30 minutos"},
            {tecnico: "RIGIDEZ MATINAL <30 MIN", leigo: "Travamento ao acordar que melhora r√°pido"},
            {tecnico: "LINFADENOPATIA", leigo: "√çnguas (caro√ßos no pesco√ßo, axilas ou virilha)"},
            {tecnico: "ALOP√âCIA DIFUSA", leigo: "Queda de cabelo generalizada"},
            {tecnico: "ALOP√âCIA AREATA", leigo: "Queda de cabelo em placas"},
            {tecnico: "HEMAT√öRIA", leigo: "Sangue na urina"},
            {tecnico: "CONVULS√ÉO", leigo: "Crises convulsivas"},
            {tecnico: "CEFAL√âIA", leigo: "Dor de cabe√ßa frequente ou intensa"},
            {tecnico: "RAYNAUD", leigo: "Dedos das m√£os/p√©s ficam roxos/brancos no frio"},
            {tecnico: "XEROSTOMIA", leigo: "Boca seca constante"},
            {tecnico: "XEROFTALMIA", leigo: "Olhos secos, areia nos olhos"},
            {tecnico: "PAROTIDITE", leigo: "Incha√ßo nas gl√¢ndulas perto do maxilar"},
            {tecnico: "PARESTESIAS", leigo: "Formigamento, dorm√™ncia nas m√£os ou p√©s"},
            {tecnico: "PET√âQUIAS", leigo: "Pequenas manchas vermelhas na pele"},
            {tecnico: "PSOR√çASE", leigo: "Manchas vermelhas com descama√ß√£o na pele"},
            {tecnico: "FEBRE", leigo: "Febre sem causa aparente"},
            {tecnico: "EMAGRECIMENTO", leigo: "Perda de peso sem dieta"},
            {tecnico: "LOMBALGIA INFLAMAT√ìRIA", leigo: "Dor nas costas que piora com descanso"},
            {tecnico: "LOMBALGIA MEC√ÇNICA", leigo: "Dor nas costas ao esfor√ßo"},
            {tecnico: "UVE√çTE", leigo: "Olho vermelho, doloroso e com fotofobia"},
            {tecnico: "FRAQUEZA MUSCULAR", leigo: "Dificuldade para levantar bra√ßos ou pernas"},
            {tecnico: "DISPN√âIA", leigo: "Falta de ar"},
            {tecnico: "DISFAGIA", leigo: "Dificuldade para engolir"},
            {tecnico: "TROMBOSE VENOSA", leigo: "Dor e incha√ßo na perna (trombose)"},
            {tecnico: "TROMBOSE ARTERIAL", leigo: "Infarto ou derrame por co√°gulo"}
        ];

        const medicamentosBase = [
            { nome: "PREDNISONA", unidade: "mg/dia" },
            { nome: "DEFLAZACORT", unidade: "mg/dia" },
            { nome: "METOTREXATE", opcoes: ["VO", "SC"], unidade: "mg/sem" },
            { nome: "LEFLUNOMIDA", unidade: "mg/dia" },
            { nome: "AZATIOPRINA", unidade: "mg/dia" },
            { nome: "SULFASSALAZINA", unidade: "mg/dia" },
            { nome: "CLOROQUINA", unidade: "mg/dia" },
            { nome: "HIDROXICLOROQUINA", unidade: "mg/dia" },
            { nome: "C√ÅLCIO", unidade: "mg/dia" },
            { nome: "VITAMINA D", unidade: "UI/dia" },
            { nome: "ANTI-INFLAMAT√ìRIO (AINE)", unidade: "mg/dia" },
            { nome: "GLUCOSAMINA", unidade: "mg/dia" },
            { nome: "CONDROITINA", unidade: "mg/dia" },
            { nome: "DIACERE√çNA", unidade: "mg/dia" },
            { nome: "AAS", unidade: "mg/dia" },
            { nome: "ANTI-HIPERTENSIVO", unidade: "mg/dia" },
            { nome: "ADALIMUMABE", unidade: "mg" },
            { nome: "ETANERCEPTE", unidade: "mg" },
            { nome: "INFLIXIMABE", unidade: "mg/kg" },
            { nome: "RITUXIMABE", unidade: "mg" },
            { nome: "TOCILIZUMABE", unidade: "mg" },
            { nome: "AMITRIPTILINA", unidade: "mg/dia" },
            { nome: "DULOXETINA", unidade: "mg/dia" },
            { nome: "PREGANALINA", unidade: "mg/dia" },
            { nome: "GABAPENTINA", unidade: "mg/dia" },
            { nome: "FLUOXETINA", unidade: "mg/dia" },
            { nome: "SERTRALINA", unidade: "mg/dia" },
            { nome: "ESCITALOPRAM", unidade: "mg/dia" }
        ];

        const comorbidadesLista = [
            "HAS (Hipertens√£o)", "DM (Diabetes)", "Dislipidemia", "Osteoporose", 
            "Osteoporose com fratura", "Artrose", "Gota", "Fibromialgia",
            "Tireoidite de Hashimoto", "S√≠ndrome de Sj√∂gren", "S√≠ndrome antifosfol√≠pide",
            "Infec√ß√µes urin√°rias de repeti√ß√£o", "Ansiedade", "Depress√£o", 
            "Sono n√£o restaurador", "Nefrolit√≠ase (pedra nos rins)", "C√¢ncer (pr√©vio)",
            "Enxaqueca", "IAM (infarto)", "AVC", "Tabagismo", "Etilismo"
        ];

        function gerarCheckboxes() {
            let htmlSinais = '';
            sintomasLista.forEach(s => {
                htmlSinais += `<div class="item-card"><input type="checkbox" class="sinal" data-tecnico="${s.tecnico}" onchange="atualizarHD()"><label title="${s.tecnico}">${s.leigo}</label></div>`;
            });
            document.getElementById('sinais').innerHTML = htmlSinais;

            atualizarMedicamentos();
            
            let htmlComorb = '';
            comorbidadesLista.forEach(c => {
                htmlComorb += `<div class="item-card"><input type="checkbox" class="comorb"><label>${c}</label></div>`;
            });
            document.getElementById('comorbidades').innerHTML = htmlComorb;
        }

        function atualizarMedicamentos() {
            let htmlMed = '';
            medicamentosBase.forEach(m => {
                htmlMed += `<div class="item-card">`;
                htmlMed += `<input type="checkbox" class="med-check">`;
                htmlMed += `<label>${m.nome}</label>`;
                htmlMed += `<div class="med-group">`;
                if (m.opcoes) {
                    htmlMed += `<select class="med-via"><option>${m.opcoes.join('</option><option>')}</option></select>`;
                }
                htmlMed += `<input type="text" class="med-dose" placeholder="dose (${m.unidade || ''})" style="width:100px;">`;
                htmlMed += `</div></div>`;
            });
            document.getElementById('medicamentos').innerHTML = htmlMed;
        }

        function calcularIMC() {
            const peso = parseFloat(document.getElementById('peso').value);
            const altura = parseFloat(document.getElementById('altura').value) / 100;
            if (peso && altura && altura > 0) {
                const imc = peso / (altura * altura);
                document.getElementById('imc').innerText = imc.toFixed(2);
                
                // Classifica√ß√£o do IMC
                let classificacao = '';
                if (imc < 18.5) classificacao = 'Abaixo do peso';
                else if (imc < 25) classificacao = 'Peso normal';
                else if (imc < 30) classificacao = 'Sobrepeso';
                else if (imc < 35) classificacao = 'Obesidade Grau I';
                else if (imc < 40) classificacao = 'Obesidade Grau II';
                else classificacao = 'Obesidade Grau III';
                
                document.getElementById('imcClass').innerText = classificacao;
            } else {
                document.getElementById('imc').innerText = '-';
                document.getElementById('imcClass').innerText = '';
            }
        }

        function atualizarVisibilidadeFisiologico() {
            const sexo = document.getElementById('sexo').value;
            const divFeminino = document.getElementById('antecedentesFeminino');
            divFeminino.style.display = sexo === 'F' ? 'block' : 'none';
        }

        function atualizarHD() {
            const sintomasSelecionados = [];
            document.querySelectorAll('#sinais input:checked').forEach(cb => {
                const tec = cb.getAttribute('data-tecnico');
                if (tec) sintomasSelecionados.push(tec);
            });

            let sugestoes = [];
            
            // Crit√©rios para AR
            if (sintomasSelecionados.includes('ARTRITE PEQUENAS ARTICULA√á√ïES') && 
                sintomasSelecionados.includes('RIGIDEZ MATINAL >30 MIN')) {
                sugestoes.push("üî¥ Artrite Reumatoide (prov√°vel) - considerar FAN, FR, anti-CCP");
            }
            
            // Crit√©rios para LES
            let pontosLES = 0;
            if (sintomasSelecionados.includes('RASH MALAR')) pontosLES += 2;
            if (sintomasSelecionados.includes('FOTOSSENSIBILIDADE')) pontosLES += 1;
            if (sintomasSelecionados.includes('ULCERAS ORAIS')) pontosLES += 1;
            if (sintomasSelecionados.includes('ARTRITE PEQUENAS ARTICULA√á√ïES')) pontosLES += 1;
            if (sintomasSelecionados.includes('SEROSITE')) pontosLES += 2;
            if (sintomasSelecionados.includes('CONVULS√ÉO')) pontosLES += 2;
            if (sintomasSelecionados.includes('HEMAT√öRIA')) pontosLES += 2;
            
            if (pontosLES >= 4) {
                sugestoes.push("üü£ L√∫pus Eritematoso Sist√™mico (prov√°vel) - considerar FAN, anti-DNA, complemento");
            } else if (pontosLES >= 2) {
                sugestoes.push("üü£ L√∫pus Eritematoso Sist√™mico (poss√≠vel) - investigar");
            }
            
            // Espondiloartrites
            if (sintomasSelecionados.includes('LOMBALGIA INFLAMAT√ìRIA')) {
                if (sintomasSelecionados.includes('UVE√çTE') || sintomasSelecionados.includes('PSOR√çASE')) {
                    sugestoes.push("üîµ Espondiloartrite (prov√°vel) - considerar HLA-B27");
                } else {
                    sugestoes.push("üîµ Espondilite Anquilosante? Investigar");
                }
            }
            
            // S√≠ndrome de Sj√∂gren
            if (sintomasSelecionados.includes('XEROSTOMIA') && sintomasSelecionados.includes('XEROFTALMIA')) {
                sugestoes.push("üü¢ S√≠ndrome de Sj√∂gren (prov√°vel) - considerar FAN, anti-Ro/La");
            }
            
            // Fen√¥meno de Raynaud
            if (sintomasSelecionados.includes('RAYNAUD') && pontosLES < 2) {
                sugestoes.push("‚ö™ Fen√¥meno de Raynaud prim√°rio (se isolado)");
            }
            
            // Vasculites
            if (sintomasSelecionados.includes('PET√âQUIAS') || sintomasSelecionados.includes('HEMAT√öRIA')) {
                sugestoes.push("üü° Poss√≠vel vasculite - considerar ANCA, bi√≥psia");
            }

            let hdSugestao = document.getElementById('sugestaoHD');
            if (sugestoes.length > 0) {
                hdSugestao.innerHTML = sugestoes.map(s => `‚Ä¢ ${s}`).join('<br>');
            } else {
                hdSugestao.innerHTML = '‚Ä¢ Nenhuma hip√≥tese espec√≠fica identificada. Considere colagenose indiferenciada.';
            }

            atualizarResumo();
        }

        function gerarCondutaAutomatica() {
            const hipotese = document.getElementById('hipotese').value.toLowerCase();
            let conduta = [];
            
            // Sempre incluir exames gerais
            conduta.push("üìã EXAMES A SOLICITAR:");
            
            if (hipotese.includes('artrite reumatoide') || hipotese.includes('ar')) {
                conduta.push("  ‚Ä¢ Hemograma completo, VHS, PCR");
                conduta.push("  ‚Ä¢ Fator reumatoide, anti-CCP");
                conduta.push("  ‚Ä¢ Radiografias de m√£os, punhos e p√©s");
                conduta.push("  ‚Ä¢ Ultrassom de articula√ß√µes se dispon√≠vel");
                conduta.push("\nüíä TRATAMENTO:");
                conduta.push("  ‚Ä¢ Iniciar Metotrexate (dose inicial 7.5-15mg/sem) + √°cido f√≥lico");
                conduta.push("  ‚Ä¢ Prednisona 5-10mg/dia por curto per√≠odo (ponte)");
                conduta.push("  ‚Ä¢ Se contraindica√ß√£o ao MTX: Leflunomida ou Sulfassalazina");
                conduta.push("  ‚Ä¢ Avaliar resposta em 4-8 semanas");
                conduta.push("\nü©π CONDUTAS ADICIONAIS:");
                conduta.push("  ‚Ä¢ Encaminhar √† fisioterapia e TO");
                conduta.push("  ‚Ä¢ Orientar sobre a doen√ßa e tratamento");
                conduta.push("  ‚Ä¢ Retorno em 4 semanas para reavalia√ß√£o");
            } 
            else if (hipotese.includes('l√∫pus') || hipotese.includes('les')) {
                conduta.push("  ‚Ä¢ Hemograma completo, VHS, PCR");
                conduta.push("  ‚Ä¢ FAN, anti-DNA, C3, C4");
                conduta.push("  ‚Ä¢ EAS + protein√∫ria de 24h");
                conduta.push("  ‚Ä¢ Fun√ß√£o renal e hep√°tica");
                conduta.push("\nüíä TRATAMENTO:");
                conduta.push("  ‚Ä¢ Hidroxicloroquina 400mg/dia (base do tratamento)");
                conduta.push("  ‚Ä¢ Prednisona conforme atividade (dose a definir)");
                conduta.push("  ‚Ä¢ Se nefrite: considerar pulsoterapia + imunossupressor");
                conduta.push("\nü©π CONDUTAS ADICIONAIS:");
                conduta.push("  ‚Ä¢ Prote√ß√£o solar rigorosa (FPS 50+, diariamente)");
                conduta.push("  ‚Ä¢ Avalia√ß√£o oftalmol√≥gica para hidroxicloroquina");
                conduta.push("  ‚Ä¢ Vacina√ß√£o em dia (exceto vacinas vivas)");
                conduta.push("  ‚Ä¢ Retorno em 2-4 semanas");
            }
            else if (hipotese.includes('espondilo') || hipotese.includes('espondilite')) {
                conduta.push("  ‚Ä¢ VHS, PCR");
                conduta.push("  ‚Ä¢ HLA-B27");
                conduta.push("  ‚Ä¢ Radiografia de sacroil√≠acas");
                conduta.push("  ‚Ä¢ RNM de sacroil√≠acas se necess√°rio");
                conduta.push("\nüíä TRATAMENTO:");
                conduta.push("  ‚Ä¢ AINE em dose plena (Naproxeno 500mg 12/12h ou Cetoprofeno 100mg 12/12h)");
                conduta.push("  ‚Ä¢ Se falha ap√≥s 4 semanas: considerar biol√≥gico (anti-TNF)");
                conduta.push("\nü©π CONDUTAS ADICIONAIS:");
                conduta.push("  ‚Ä¢ Fisioterapia para manter mobilidade");
                conduta.push("  ‚Ä¢ Orientar exerc√≠cios de alongamento di√°rios");
                conduta.push("  ‚Ä¢ Retorno em 4-6 semanas");
            }
            else if (hipotese.includes('sj√∂gren')) {
                conduta.push("  ‚Ä¢ FAN, anti-Ro/SSA, anti-La/SSB");
                conduta.push("  ‚Ä¢ Hemograma, VHS, PCR, eletroforese de prote√≠nas");
                conduta.push("  ‚Ä¢ Teste de Schirmer e rosa bengala");
                conduta.push("\nüíä TRATAMENTO:");
                conduta.push("  ‚Ä¢ L√°grimas artificiais (sem conservantes)");
                conduta.push("  ‚Ä¢ Saliva artificial ou pilocarpina");
                conduta.push("  ‚Ä¢ Hidroxicloroquina para manifesta√ß√µes sist√™micas");
                conduta.push("\nü©π CONDUTAS ADICIONAIS:");
                conduta.push("  ‚Ä¢ Higiene oral rigorosa");
                conduta.push("  ‚Ä¢ Evitar medicamentos anticolin√©rgicos");
                conduta.push("  ‚Ä¢ Retorno em 2-3 meses");
            }
            else if (hipotese.includes('gota')) {
                conduta.push("  ‚Ä¢ √Åcido √∫rico s√©rico");
                conduta.push("  ‚Ä¢ Urin√°lise, fun√ß√£o renal");
                conduta.push("  ‚Ä¢ L√≠quido sinovial se articula√ß√£o com derrame");
                conduta.push("\nüíä TRATAMENTO:");
                conduta.push("  ‚Ä¢ Crise aguda: Colchicina 0,5mg 8/8h ou AINE");
                conduta.push("  ‚Ä¢ Ap√≥s crise: Alopurinol 100mg/dia (ajustar conforme uricemia)");
                conduta.push("  ‚Ä¢ Orientar profilaxia com colchicina nos primeiros meses");
                conduta.push("\nü©π CONDUTAS ADICIONAIS:");
                conduta.push("  ‚Ä¢ Dieta: reduzir purinas, √°lcool, frutose");
                conduta.push("  ‚Ä¢ Hidrata√ß√£o adequada");
                conduta.push("  ‚Ä¢ Retorno em 4 semanas");
            }
            else if (hipotese.includes('fibromialgia')) {
                conduta.push("  ‚Ä¢ Diagn√≥stico cl√≠nico (crit√©rios ACR 2016)");
                conduta.push("  ‚Ä¢ Descartar doen√ßas associadas (hemograma, VHS, TSH, vitamina D)");
                conduta.push("\nüíä TRATAMENTO:");
                conduta.push("  ‚Ä¢ Amitriptilina 12.5-25mg ao deitar");
                conduta.push("  ‚Ä¢ Ou Duloxetina 30-60mg/dia");
                conduta.push("  ‚Ä¢ Ou Pregabalina 75-150mg 12/12h");
                conduta.push("\nü©π CONDUTAS ADICIONAIS:");
                conduta.push("  ‚Ä¢ Atividade f√≠sica regular (aer√≥bico, alongamento)");
                conduta.push("  ‚Ä¢ Terapia cognitivo-comportamental");
                conduta.push("  ‚Ä¢ Higiene do sono");
                conduta.push("  ‚Ä¢ Retorno em 4-6 semanas");
            }
            else {
                conduta.push("  ‚Ä¢ Hemograma completo, VHS, PCR");
                conduta.push("  ‚Ä¢ FAN, FR");
                conduta.push("  ‚Ä¢ Fun√ß√£o renal e hep√°tica");
                conduta.push("  ‚Ä¢ Exames conforme hip√≥tese cl√≠nica");
                conduta.push("\nüíä TRATAMENTO:");
                conduta.push("  ‚Ä¢ Aguardar defini√ß√£o diagn√≥stica");
                conduta.push("  ‚Ä¢ Tratamento sintom√°tico se necess√°rio");
                conduta.push("\nü©π CONDUTAS ADICIONAIS:");
                conduta.push("  ‚Ä¢ Orientar retorno em 2-4 semanas com exames");
                conduta.push("  ‚Ä¢ Considerar encaminhamento ao reumatologista");
            }
            
            document.getElementById('condutaGerada').innerText = conduta.join('\n');
            document.getElementById('conduta').value = conduta.join('\n');
        }

        function gerarResumoCompleto() {
            let texto = [];
            
            // Dados do paciente
            const sexo = document.getElementById('sexo').value;
            const idade = document.getElementById('idade').value;
            const raca = document.getElementById('raca').value;
            
            let pacienteDesc = "Paciente";
            if (sexo === 'F') pacienteDesc += " do sexo feminino";
            else if (sexo === 'M') pacienteDesc += " do sexo masculino";
            
            if (raca) pacienteDesc += `, ${raca.toLowerCase()}`;
            if (idade) pacienteDesc += `, ${idade} anos`;
            
            // IMC
            const peso = document.getElementById('peso').value;
            const altura = document.getElementById('altura').value;
            const imc = document.getElementById('imc').innerText;
            const imcClass = document.getElementById('imcClass').innerText;
            
            if (peso && altura) {
                pacienteDesc += `, peso ${peso}kg, altura ${altura}cm, IMC ${imc} (${imcClass})`;
            }
            
            texto.push(pacienteDesc + ", vem √† consulta queixando-se de:\n");
            
            // Queixa principal
            const queixa = document.getElementById('queixaPrincipal').value.trim();
            if (queixa) {
                texto.push(queixa);
            } else {
                texto.push("queixa principal n√£o especificada");
            }
            texto.push("\n");
            
            // Sintomas positivos (HDA)
            const sintomasPositivos = [];
            document.querySelectorAll('#sinais input:checked').forEach(cb => {
                const label = cb.parentElement.querySelector('label').innerText;
                sintomasPositivos.push(label.toLowerCase());
            });
            
            if (sintomasPositivos.length > 0) {
                texto.push("Refere ");
                if (sintomasPositivos.length === 1) {
                    texto.push(sintomasPositivos[0] + ".");
                } else {
                    texto.push(sintomasPositivos.slice(0, -1).join(", ") + " e " + sintomasPositivos.slice(-1) + ".");
                }
                texto.push("\n");
            }
            
            // Antecedentes fisiol√≥gicos (apenas feminino)
            if (sexo === 'F') {
                const menopausa = document.getElementById('menopausa').checked;
                const reposHorm = document.getElementById('reposHorm').checked;
                const menstruacao = document.getElementById('menstruacao').value;
                const g = document.getElementById('g').value;
                const p = document.getElementById('p').value;
                const a = document.getElementById('a').value;
                const dum = document.getElementById('dum').value;
                
                let antecedentes = [];
                if (menopausa) antecedentes.push("menopausa");
                if (reposHorm) antecedentes.push("reposi√ß√£o hormonal");
                if (menstruacao) antecedentes.push(`menstrua√ß√£o ${menstruacao.toLowerCase()}`);
                if (g || p || a) antecedentes.push(`G${g || '0'}P${p || '0'}A${a || '0'}`);
                if (dum) antecedentes.push(`DUM: ${dum}`);
                
                if (antecedentes.length > 0) {
                    texto.push("\nAntecedentes ginecol√≥gicos: " + antecedentes.join(", ") + ".\n");
                }
            }
            
            // Medicamentos em uso
            const medicamentos = [];
            document.querySelectorAll('#medicamentos .item-card').forEach(card => {
                const cb = card.querySelector('input[type="checkbox"]');
                if (cb && cb.checked) {
                    let nome = card.querySelector('label')?.innerText || '';
                    const dose = card.querySelector('.med-dose, input[type="text"]')?.value;
                    const via = card.querySelector('select')?.value;
                    if (nome) {
                        let txt = nome;
                        if (via) txt += ` ${via}`;
                        if (dose) txt += ` ${dose}`;
                        medicamentos.push(txt.toLowerCase());
                    }
                }
            });
            
            if (medicamentos.length > 0) {
                texto.push("\nEm uso de: " + medicamentos.join(", ") + ".\n");
            }
            
            // Comorbidades
            const comorbidades = [];
            document.querySelectorAll('#comorbidades input:checked').forEach(cb => {
                const label = cb.parentElement.querySelector('label').innerText;
                comorbidades.push(label.toLowerCase());
            });
            
            if (comorbidades.length > 0) {
                texto.push("\nComorbidades: " + comorbidades.join(", ") + ".\n");
            }
            
            // Exame f√≠sico
            const pa = document.getElementById('pa').value;
            const fc = document.getElementById('fc').value;
            const fr = document.getElementById('fr').value;
            const temp = document.getElementById('temp').value;
            const sat = document.getElementById('sat').value;
            const ac = document.getElementById('ac').value;
            const ap = document.getElementById('ap').value;
            const abdome = document.getElementById('abdome').value;
            const extrem = document.getElementById('extrem').value;
            
            texto.push("\nüìã EXAME F√çSICO:");
            let efLinha = "";
            if (pa) efLinha += `PA: ${pa}, `;
            if (fc) efLinha += `FC: ${fc} bpm, `;
            if (fr) efLinha += `FR: ${fr} irpm, `;
            if (temp) efLinha += `Temp: ${temp}¬∞C, `;
            if (sat) efLinha += `Sat: ${sat}%, `;
            texto.push(efLinha.replace(/, $/, ''));
            
            if (ac) texto.push(`AC: ${ac}`);
            if (ap) texto.push(`AP: ${ap}`);
            if (abdome) texto.push(`Abdome: ${abdome}`);
            if (extrem) texto.push(`Extremidades: ${extrem}`);
            texto.push("");
            
            // Hip√≥tese diagn√≥stica
            const hipotese = document.getElementById('hipotese').value;
            if (hipotese) {
                texto.push("\nüîç HIP√ìTESE DIAGN√ìSTICA:");
                texto.push(hipotese);
                texto.push("");
            }
            
            // Conduta
            const conduta = document.getElementById('conduta').value;
            if (conduta) {
                texto.push("\nüìã CONDUTA:");
                texto.push(conduta);
            }
            
            const resumoDiv = document.getElementById('resumoFinal');
            resumoDiv.style.display = 'block';
            resumoDiv.innerText = texto.join('\n');
        }

        function toggleAll(sectionId, check) {
            const container = document.getElementById(sectionId);
            const checkboxes = container.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(cb => cb.checked = check);
            atualizarHD();
            atualizarResumo();
        }

        function atualizarResumo() {
            const total = document.querySelectorAll('input[type="checkbox"]:checked').length;
            document.getElementById('totalMarcados').innerText = total;
            const queixa = document.getElementById('queixaPrincipal').value.trim();
            document.getElementById('resumoQueixa').innerText = queixa.substring(0,30) + (queixa.length>30?'...':'') || '‚Äî';
            const hipotese = document.getElementById('hipotese').value.trim();
            document.getElementById('resumoHD').innerText = hipotese.substring(0,20) + (hipotese.length>20?'...':'') || '‚Äî';
        }

        function limparTudo() {
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.querySelectorAll('input[type="text"], input[type="number"], select, textarea').forEach(field => field.value = '');
            document.getElementById('sexo').value = '';
            document.getElementById('raca').value = '';
            document.getElementById('menstruacao').value = '';
            document.getElementById('imc').innerText = '-';
            document.getElementById('imcClass').innerText = '';
            atualizarMedicamentos();
            atualizarHD();
            atualizarResumo();
            document.getElementById('resumoFinal').style.display = 'none';
            document.getElementById('antecedentesFeminino').style.display = 'none';
            document.getElementById('condutaGerada').innerText = 'Clique em "Gerar Conduta Autom√°tica" ap√≥s definir a hip√≥tese...';
        }

        // Inicializa√ß√£o e listeners
        window.onload = () => {
            gerarCheckboxes();
            document.addEventListener('change', () => {
                atualizarResumo();
                atualizarHD();
            });
            document.addEventListener('input', () => {
                atualizarResumo();
                if (event.target.id === 'hipotese') {
                    // N√£o gera autom√°tico, s√≥ quando clicar no bot√£o
                }
            });
        };
    </script>
</body>
</html>
