<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anamnese Reumatologia - Completa</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f0f5f9;
            padding: 20px;
            color: #1e3c5c;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        h1 {
            color: #0a2942;
            margin-bottom: 20px;
            font-size: 2rem;
            border-bottom: 3px solid #4a90e2;
            padding-bottom: 10px;
        }
        h2 {
            background: #1e4a76;
            color: white;
            padding: 10px 15px;
            border-radius: 8px 8px 0 0;
            font-size: 1.2rem;
            margin-top: 20px;
            margin-bottom: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        h2 button {
            margin-left: auto;
            background: white;
            border: none;
            border-radius: 4px;
            padding: 4px 12px;
            font-size: 0.9rem;
            cursor: pointer;
            color: #1e4a76;
            font-weight: bold;
        }
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 12px;
            background: #d9e6f2;
            padding: 15px;
            border-radius: 0 0 8px 8px;
            margin-bottom: 10px;
        }
        .item-card {
            background: white;
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            transition: 0.2s;
            border-left: 5px solid #4a90e2;
        }
        .item-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .item-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
            flex-wrap: wrap;
        }
        .item-header input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #1e4a76;
        }
        .item-header label {
            font-weight: 600;
            cursor: pointer;
            flex-grow: 1;
            color: #0a2942;
            font-size: 0.95rem;
        }
        .tempo-controle {
            margin-left: 32px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: #1e4a76;
            padding: 5px 0;
            flex-wrap: wrap;
        }
        .tempo-controle input {
            border: 1px solid #b0c8da;
            border-radius: 4px;
            padding: 4px 8px;
            width: 70px;
            font-size: 0.9rem;
        }
        .tempo-controle select {
            border: 1px solid #b0c8da;
            border-radius: 4px;
            padding: 4px;
            background: white;
        }
        .med-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
            width: 100%;
            margin-top: 5px;
        }
        .med-group input, .med-group select {
            border: 1px solid #b0c8da;
            border-radius: 4px;
            padding: 4px 8px;
        }
        .med-detalhes {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 8px;
            margin-left: 32px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 3px solid #4a90e2;
        }
        .med-detalhes input, .med-detalhes select {
            border: 1px solid #b0c8da;
            border-radius: 4px;
            padding: 4px 8px;
            font-size: 0.9rem;
        }
        .med-detalhes .campo-group {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        .med-detalhes .campo-group label {
            font-size: 0.8rem;
            color: #1e4a76;
            font-weight: 600;
        }
        .double-col {
            grid-column: span 2;
        }
        .footer-actions {
            margin-top: 30px;
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .btn {
            background: #1e4a76;
            color: white;
            border: none;
            padding: 12px 28px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .btn:hover {
            background: #0a2942;
            transform: scale(1.02);
        }
        .btn.secondary {
            background: #6c757d;
        }
        .btn.success {
            background: #28a745;
        }
        .resumo-bar {
            background: white;
            border-radius: 50px;
            padding: 12px 20px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }
        .badge {
            background: #1e4a76;
            color: white;
            border-radius: 20px;
            padding: 4px 16px;
            font-weight: 600;
        }
        .obs-field {
            background: white;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #b0c8da;
            margin-bottom: 15px;
        }
        textarea {
            width: 100%;
            border: 1px solid #b0c8da;
            border-radius: 8px;
            padding: 12px;
            font-family: inherit;
            font-size: 0.95rem;
            resize: vertical;
        }
        .paciente-info {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            background: white;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            align-items: flex-end;
        }
        .info-field {
            display: flex;
            flex-direction: column;
            gap: 5px;
            min-width: 100px;
        }
        .info-field label {
            font-weight: 600;
            color: #1e4a76;
            font-size: 0.9rem;
        }
        .info-field input, .info-field select {
            padding: 6px;
            border: 1px solid #b0c8da;
            border-radius: 6px;
            font-size: 0.95rem;
        }
        .imc-container {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        .imc-valor {
            background: #e8f4fd;
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
            text-align: center;
        }
        .imc-classificacao {
            font-size: 0.8rem;
            color: #1e4a76;
            text-align: center;
            font-weight: 500;
        }
        .hd-box {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 8px solid #4a90e2;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .hd-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #1e4a76;
            margin-bottom: 15px;
        }
        .sugestao-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            margin: 5px 0;
            border-left: 3px solid #ffc107;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü©∫ Anamnese Reumatologia - Completa</h1>

        <!-- Dados do Paciente -->
        <div class="paciente-info">
            <div class="info-field">
                <label>Sexo:</label>
                <select id="sexo" onchange="atualizarVisibilidadeFisiologico()">
                    <option value="">Selecione</option>
                    <option value="F">Feminino</option>
                    <option value="M">Masculino</option>
                </select>
            </div>
            <div class="info-field">
                <label>Ra√ßa/Cor:</label>
                <select id="raca">
                    <option value="">Selecione</option>
                    <option>Branca</option>
                    <option>Preta</option>
                    <option>Parda</option>
                    <option>Amarela</option>
                    <option>Ind√≠gena</option>
                </select>
            </div>
            <div class="info-field">
                <label>Idade (anos):</label>
                <input type="number" id="idade" min="0" max="120" step="1">
            </div>
            <div class="info-field">
                <label>Peso (kg):</label>
                <input type="number" id="peso" min="0" max="300" step="0.1" oninput="calcularIMC()">
            </div>
            <div class="info-field">
                <label>Altura (cm):</label>
                <input type="number" id="altura" min="0" max="250" step="1" oninput="calcularIMC()">
            </div>
            <div class="info-field">
                <label>IMC:</label>
                <div class="imc-container">
                    <div class="imc-valor" id="imc">-</div>
                    <div class="imc-classificacao" id="imcClass"></div>
                </div>
            </div>
        </div>

        <!-- Resumo -->
        <div class="resumo-bar">
            <span><span class="badge" id="totalMarcados">0</span> itens marcados</span>
            <span>üìå <span id="resumoQueixa" style="font-weight:600;">‚Äî</span></span>
        </div>

        <!-- Queixa Principal -->
        <div class="obs-field">
            <label style="font-weight:700;">üó£Ô∏è Queixa Principal:</label>
            <textarea id="queixaPrincipal" rows="2" placeholder="Ex: Dor nas juntas h√° 3 meses..." oninput="atualizarResumo()"></textarea>
        </div>

        <!-- SINAIS E SINTOMAS -->
        <h2>üîç SINAIS E SINTOMAS <button onclick="toggleAll('sinais', true)">Marcar todos</button><button onclick="toggleAll('sinais', false)">Limpar</button></h2>
        <div class="card-grid" id="sinais"></div>

        <!-- MEDICAMENTOS EM USO (com imunobiol√≥gicos e op√ß√£o "outros") -->
        <h2>üíä MEDICAMENTOS EM USO <button onclick="adicionarOutroMedicamento()">+ Adicionar Outro Medicamento</button></h2>
        <div class="card-grid" id="medicamentos"></div>

        <!-- COMORBIDADES (com tempo de diagn√≥stico) -->
        <h2>üìã COMORBIDADES</h2>
        <div class="card-grid" id="comorbidades"></div>

        <!-- EXAME F√çSICO (com b√°sicos reumatol√≥gicos) -->
        <h2>ü©ª EXAME F√çSICO</h2>
        <div class="card-grid">
            <div class="item-card double-col">
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <span>PA: <input type="text" placeholder="120x80" id="pa" style="width:100px;"></span>
                    <span>FC: <input type="text" placeholder="bpm" id="fc" style="width:70px;"></span>
                    <span>FR: <input type="text" placeholder="irpm" id="fr" style="width:70px;"></span>
                    <span>Temp: <input type="text" placeholder="¬∞C" id="temp" style="width:70px;"></span>
                </div>
            </div>
            <div class="item-card double-col">
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <span>AC: <input type="text" placeholder="RR 2T" id="ac" style="width:120px;"></span>
                    <span>AP: <input type="text" placeholder="MV+ sem RA" id="ap" style="width:150px;"></span>
                    <span>Abdome: <input type="text" placeholder="..." id="abdome" style="width:120px;"></span>
                </div>
            </div>
            <!-- Exame F√≠sico Reumatol√≥gico -->
            <div class="item-card double-col" style="border-left-color: #f5b042;">
                <div style="font-weight: 700; color: #1e4a76; margin-bottom: 10px;">üî¨ EXAME F√çSICO REUMATOL√ìGICO</div>
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px;">
                    <div>
                        <label style="font-weight: 600;">Articula√ß√µes:</label><br>
                        <input type="text" id="articulacoes" placeholder="Ex: edema, calor, rubor" style="width:100%;">
                    </div>
                    <div>
                        <label style="font-weight: 600;">For√ßa muscular:</label><br>
                        <input type="text" id="forca" placeholder="Ex: Grau V em MMSS/MMII" style="width:100%;">
                    </div>
                    <div>
                        <label style="font-weight: 600;">Deformidades:</label><br>
                        <input type="text" id="deformidades" placeholder="Ex: m√£os em pesco√ßo de cisne" style="width:100%;">
                    </div>
                    <div>
                        <label style="font-weight: 600;">N√≥dulos subcut√¢neos:</label><br>
                        <input type="text" id="nodulos" placeholder="Ex: presentes em cotovelos" style="width:100%;">
                    </div>
                    <div>
                        <label style="font-weight: 600;">Derrame articular:</label><br>
                        <input type="text" id="derrame" placeholder="Ex: joelho direito com derrame" style="width:100%;">
                    </div>
                    <div>
                        <label style="font-weight: 600;">Marcha:</label><br>
                        <input type="text" id="marcha" placeholder="Ex: claudicante, normal" style="width:100%;">
                    </div>
                    <div>
                        <label style="font-weight: 600;">Edema:</label><br>
                        <input type="text" id="edema" placeholder="Ex: +++/4, cacifo" style="width:100%;">
                    </div>
                    <div>
                        <label style="font-weight: 600;">Pele:</label><br>
                        <input type="text" id="pele" placeholder="Ex: rash, psor√≠ase, cicatrizes" style="width:100%;">
                    </div>
                </div>
            </div>
            <div class="item-card double-col">
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <span>Extremidades: <input type="text" placeholder="Perfus√£o, pulsos" id="extrem" style="width:200px;"></span>
                </div>
            </div>
        </div>

        <!-- Hip√≥tese e Conduta -->
        <div class="hd-box">
            <div class="hd-title">ü§ñ Hip√≥tese Diagn√≥stica (baseada nos sintomas)</div>
            <div id="sugestaoHD" class="sugestao-item">Selecione os sintomas para ver sugest√µes...</div>
            
            <button class="btn success" onclick="gerarCondutaAutomatica()" style="margin:15px 0;">‚ö° Gerar Conduta Autom√°tica</button>
            
            <div class="hd-title">üìã Conduta</div>
            <textarea id="conduta" rows="6" placeholder="Conduta gerada automaticamente..."></textarea>
        </div>

        <!-- Antecedentes Feminino -->
        <div id="antecedentesFeminino" style="display: none;">
            <h2>üß¨ ANTECEDENTES (Feminino)</h2>
            <div class="card-grid">
                <div class="item-card">
                    <div class="item-header">
                        <input type="checkbox" id="menopausa">
                        <label for="menopausa">Menopausa</label>
                    </div>
                </div>
                <div class="item-card">
                    <div class="item-header">
                        <input type="checkbox" id="reposHorm">
                        <label for="reposHorm">Reposi√ß√£o Hormonal</label>
                    </div>
                </div>
                <div class="item-card">
                    <div class="item-header">
                        <label>Menstrua√ß√£o:</label>
                        <select id="menstruacao">
                            <option value="">--</option>
                            <option>Regular</option>
                            <option>Irregular</option>
                        </select>
                    </div>
                </div>
                <div class="item-card">
                    <div class="item-header">
                        <label>G:</label><input type="number" id="g" style="width:50px;">
                        <label>P:</label><input type="number" id="p" style="width:50px;">
                        <label>A:</label><input type="number" id="a" style="width:50px;">
                    </div>
                </div>
            </div>
        </div>

        <!-- Bot√µes -->
        <div class="footer-actions">
            <button class="btn" onclick="gerarResumoCompleto()">üìã Gerar HDA + Conduta</button>
            <button class="btn secondary" onclick="limparTudo()">üîÑ Nova Consulta</button>
        </div>
        <div id="resumoFinal" style="margin-top:30px; background:#e9f0f9; padding:20px; border-radius:12px; display:none; white-space:pre-wrap; line-height:1.6;"></div>
    </div>

    <script>
        const sintomasLista = [
            {tecnico: "RASH MALAR", leigo: "Vermelhid√£o no rosto (asa de borboleta)"},
            {tecnico: "FOTOSSENSIBILIDADE", leigo: "Pele sens√≠vel ao sol"},
            {tecnico: "ULCERAS ORAIS", leigo: "Feridas na boca ou nariz"},
            {tecnico: "SEROSITE", leigo: "Dor no peito ao respirar"},
            {tecnico: "ANEMIA", leigo: "Cansa√ßo, palidez"},
            {tecnico: "ARTRITE PEQUENAS ARTICULA√á√ïES", leigo: "Dor e incha√ßo nas m√£os/punhos/p√©s"},
            {tecnico: "ARTRITE GRANDES ARTICULA√á√ïES", leigo: "Dor e incha√ßo nos joelhos/ombros/quadris"},
            {tecnico: "RIGIDEZ MATINAL >30 MIN", leigo: "Travamento ao acordar >30 min"},
            {tecnico: "RIGIDEZ MATINAL <30 MIN", leigo: "Travamento ao acordar <30 min"},
            {tecnico: "LINFADENOPATIA", leigo: "√çnguas"},
            {tecnico: "ALOP√âCIA DIFUSA", leigo: "Queda de cabelo generalizada"},
            {tecnico: "ALOP√âCIA AREATA", leigo: "Queda de cabelo em placas"},
            {tecnico: "HEMAT√öRIA", leigo: "Sangue na urina"},
            {tecnico: "CONVULS√ÉO", leigo: "Crises convulsivas"},
            {tecnico: "CEFAL√âIA", leigo: "Dor de cabe√ßa frequente"},
            {tecnico: "RAYNAUD", leigo: "Dedos ficam roxos/brancos no frio"},
            {tecnico: "XEROSTOMIA", leigo: "Boca seca constante"},
            {tecnico: "XEROFTALMIA", leigo: "Olhos secos"},
            {tecnico: "PARESTESIAS", leigo: "Formigamento/dorm√™ncia"},
            {tecnico: "PET√âQUIAS", leigo: "Manchas vermelhas na pele"},
            {tecnico: "PSOR√çASE", leigo: "Manchas com descama√ß√£o"},
            {tecnico: "FEBRE", leigo: "Febre sem causa aparente"},
            {tecnico: "EMAGRECIMENTO", leigo: "Perda de peso"},
            {tecnico: "LOMBALGIA INFLAMAT√ìRIA", leigo: "Dor nas costas que piora com descanso"},
            {tecnico: "LOMBALGIA MEC√ÇNICA", leigo: "Dor nas costas ao esfor√ßo"},
            {tecnico: "UVE√çTE", leigo: "Olho vermelho e doloroso"},
            {tecnico: "FRAQUEZA MUSCULAR", leigo: "Dificuldade para levantar bra√ßos/pernas"},
            {tecnico: "DISPN√âIA", leigo: "Falta de ar"},
            {tecnico: "DISFAGIA", leigo: "Dificuldade para engolir"},
            {tecnico: "TROMBOSE VENOSA", leigo: "Dor e incha√ßo na perna (trombose)"}
        ];

        const medicamentosBase = [
            { nome: "PREDNISONA", unidade: "mg/dia" },
            { nome: "DEFLAZACORT", unidade: "mg/dia" },
            { nome: "METOTREXATE", opcoes: ["VO", "SC"], unidade: "mg/sem" },
            { nome: "LEFLUNOMIDA", unidade: "mg/dia" },
            { nome: "AZATIOPRINA", unidade: "mg/dia" },
            { nome: "SULFASSALAZINA", unidade: "mg/dia" },
            { nome: "HIDROXICLOROQUINA", unidade: "mg/dia" },
            { nome: "C√ÅLCIO", unidade: "mg/dia" },
            { nome: "VITAMINA D", unidade: "UI/dia" },
            { nome: "ANTI-INFLAMAT√ìRIO", unidade: "mg/dia" },
            { nome: "AAS", unidade: "mg/dia" },
            { nome: "ANTI-HIPERTENSIVO", unidade: "mg/dia" },
            { nome: "AMITRIPTILINA", unidade: "mg/dia" },
            { nome: "DULOXETINA", unidade: "mg/dia" },
            { nome: "PREGANALINA", unidade: "mg/dia" },
            { nome: "GABAPENTINA", unidade: "mg/dia" },
            // Imunobiol√≥gicos
            { nome: "ADALIMUMABE (Humira)", unidade: "mg" },
            { nome: "ETANERCEPTE (Enbrel)", unidade: "mg" },
            { nome: "INFLIXIMABE (Remicade)", unidade: "mg/kg" },
            { nome: "GOLIMUMABE (Simponi)", unidade: "mg" },
            { nome: "CERTOLIZUMABE (Cimzia)", unidade: "mg" },
            { nome: "RITUXIMABE (MabThera)", unidade: "mg" },
            { nome: "TOCILIZUMABE (Actemra)", unidade: "mg" },
            { nome: "ABATACEPTE (Orencia)", unidade: "mg" },
            { nome: "SECUQUINUMABE (Cosentyx)", unidade: "mg" },
            { nome: "USTEQUINUMABE (Stelara)", unidade: "mg" },
            { nome: "BELIMUMABE (Benlysta)", unidade: "mg" }
        ];

        const comorbidadesLista = [
            "HAS (Hipertens√£o)", "DM (Diabetes)", "Dislipidemia", "Osteoporose", 
            "Artrose", "Gota", "Fibromialgia", "Hipotireoidismo", "Ansiedade", 
            "Depress√£o", "Tabagismo", "Etilismo", "Asma", "DPOC", "ICC",
            "Doen√ßa arterial coronariana", "AVC pr√©vio", "Trombose venosa",
            "Doen√ßa renal cr√¥nica", "Hepatopatia", "HIV", "Hepatite B", "Hepatite C",
            "Tuberculose (pr√©via)", "Neoplasia (pr√©via)"
        ];

        function gerarCheckboxes() {
            // Sintomas
            let htmlSinais = '';
            sintomasLista.forEach((s) => {
                htmlSinais += `
                    <div class="item-card">
                        <div class="item-header">
                            <input type="checkbox" class="sinal" data-tecnico="${s.tecnico}" onchange="toggleTempoSintoma(this)">
                            <label title="${s.tecnico}">${s.leigo}</label>
                        </div>
                        <div class="tempo-controle" style="display: none;">
                            <span>H√°:</span>
                            <input type="number" class="tempo-valor" min="0" step="1" placeholder="n¬∫">
                            <select class="tempo-unidade">
                                <option value="dias">dias</option>
                                <option value="semanas">semanas</option>
                                <option value="meses">meses</option>
                                <option value="anos">anos</option>
                            </select>
                        </div>
                    </div>
                `;
            });
            document.getElementById('sinais').innerHTML = htmlSinais;

            // Medicamentos base
            let htmlMed = '';
            medicamentosBase.forEach(m => {
                htmlMed += `<div class="item-card">`;
                htmlMed += `<div class="item-header">`;
                htmlMed += `<input type="checkbox" class="med-check" onchange="toggleDetalhesMed(this)">`;
                htmlMed += `<label>${m.nome}</label>`;
                htmlMed += `</div>`;
                htmlMed += `<div class="med-group">`;
                if (m.opcoes) {
                    htmlMed += `<select class="med-via"><option>${m.opcoes.join('</option><option>')}</option></select>`;
                }
                htmlMed += `<input type="text" class="med-dose" placeholder="dose (${m.unidade})" style="width:120px;">`;
                htmlMed += `</div>`;
                htmlMed += `<div class="med-detalhes" style="display: none;">`;
                htmlMed += `<div class="campo-group"><label>Tempo de uso:</label><input type="text" class="med-tempo" placeholder="ex: 2 meses"></div>`;
                htmlMed += `<div class="campo-group"><label>Indica√ß√£o:</label><input type="text" class="med-indicacao" placeholder="ex: artrite reumatoide"></div>`;
                htmlMed += `</div>`;
                htmlMed += `</div>`;
            });
            document.getElementById('medicamentos').innerHTML = htmlMed;

            // Comorbidades
            let htmlComorb = '';
            comorbidadesLista.forEach(c => {
                htmlComorb += `
                    <div class="item-card">
                        <div class="item-header">
                            <input type="checkbox" class="comorb" onchange="toggleTempoComorb(this)">
                            <label>${c}</label>
                        </div>
                        <div class="tempo-controle" style="display: none;">
                            <span>Diagn√≥stico h√°:</span>
                            <input type="number" class="tempo-valor" min="0" step="1" placeholder="n¬∫">
                            <select class="tempo-unidade">
                                <option value="meses">meses</option>
                                <option value="anos">anos</option>
                            </select>
                        </div>
                    </div>
                `;
            });
            document.getElementById('comorbidades').innerHTML = htmlComorb;
        }

        function adicionarOutroMedicamento() {
            const container = document.getElementById('medicamentos');
            const div = document.createElement('div');
            div.className = 'item-card';
            div.innerHTML = `
                <div class="item-header">
                    <input type="checkbox" class="med-check" onchange="toggleDetalhesMed(this)" checked>
                    <input type="text" placeholder="Nome do medicamento" style="flex-grow:1; padding:4px;">
                </div>
                <div class="med-group">
                    <select class="med-via">
                        <option>VO</option>
                        <option>SC</option>
                        <option>IM</option>
                        <option>IV</option>
                        <option>T√≥pico</option>
                    </select>
                    <input type="text" class="med-dose" placeholder="dose" style="width:120px;">
                </div>
                <div class="med-detalhes" style="display: flex;">
                    <div class="campo-group"><label>Tempo de uso:</label><input type="text" class="med-tempo" placeholder="ex: 2 meses"></div>
                    <div class="campo-group"><label>Indica√ß√£o:</label><input type="text" class="med-indicacao" placeholder="ex: artrite reumatoide"></div>
                </div>
            `;
            container.appendChild(div);
            atualizarResumo();
        }

        function toggleDetalhesMed(checkbox) {
            const itemCard = checkbox.closest('.item-card');
            const detalhesDiv = itemCard.querySelector('.med-detalhes');
            detalhesDiv.style.display = checkbox.checked ? 'flex' : 'none';
        }

        function toggleTempoSintoma(checkbox) {
            const itemCard = checkbox.closest('.item-card');
            const tempoDiv = itemCard.querySelector('.tempo-controle');
            tempoDiv.style.display = checkbox.checked ? 'flex' : 'none';
            if (!checkbox.checked) {
                tempoDiv.querySelector('.tempo-valor').value = '';
            }
            atualizarResumo();
            atualizarHD();
        }

        function toggleTempoComorb(checkbox) {
            const itemCard = checkbox.closest('.item-card');
            const tempoDiv = itemCard.querySelector('.tempo-controle');
            tempoDiv.style.display = checkbox.checked ? 'flex' : 'none';
            if (!checkbox.checked) {
                tempoDiv.querySelector('.tempo-valor').value = '';
            }
            atualizarResumo();
        }

        function calcularIMC() {
            const peso = parseFloat(document.getElementById('peso').value);
            const altura = parseFloat(document.getElementById('altura').value) / 100;
            if (peso && altura && altura > 0) {
                const imc = peso / (altura * altura);
                document.getElementById('imc').innerText = imc.toFixed(2);
                
                let classificacao = '';
                if (imc < 18.5) classificacao = 'Abaixo do peso';
                else if (imc < 25) classificacao = 'Peso normal';
                else if (imc < 30) classificacao = 'Sobrepeso';
                else if (imc < 35) classificacao = 'Obesidade Grau I';
                else if (imc < 40) classificacao = 'Obesidade Grau II';
                else classificacao = 'Obesidade Grau III';
                
                document.getElementById('imcClass').innerText = classificacao;
            } else {
                document.getElementById('imc').innerText = '-';
                document.getElementById('imcClass').innerText = '';
            }
        }

        function atualizarVisibilidadeFisiologico() {
            const sexo = document.getElementById('sexo').value;
            document.getElementById('antecedentesFeminino').style.display = sexo === 'F' ? 'block' : 'none';
        }

        function atualizarHD() {
            const sintomasSelecionados = [];
            document.querySelectorAll('#sinais input.sinal:checked').forEach(cb => {
                sintomasSelecionados.push(cb.getAttribute('data-tecnico'));
            });

            let sugestoes = [];
            
            if (sintomasSelecionados.includes('ARTRITE PEQUENAS ARTICULA√á√ïES') && 
                sintomasSelecionados.includes('RIGIDEZ MATINAL >30 MIN')) {
                sugestoes.push("üî¥ Artrite Reumatoide (prov√°vel)");
            }
            
            let pontosLES = 0;
            if (sintomasSelecionados.includes('RASH MALAR')) pontosLES += 2;
            if (sintomasSelecionados.includes('FOTOSSENSIBILIDADE')) pontosLES += 1;
            if (sintomasSelecionados.includes('ULCERAS ORAIS')) pontosLES += 1;
            if (sintomasSelecionados.includes('ARTRITE PEQUENAS ARTICULA√á√ïES')) pontosLES += 1;
            if (sintomasSelecionados.includes('SEROSITE')) pontosLES += 2;
            
            if (pontosLES >= 4) {
                sugestoes.push("üü£ L√∫pus Eritematoso Sist√™mico (prov√°vel)");
            }
            
            if (sintomasSelecionados.includes('LOMBALGIA INFLAMAT√ìRIA')) {
                sugestoes.push("üîµ Espondiloartrite (poss√≠vel)");
            }
            
            if (sintomasSelecionados.includes('XEROSTOMIA') && sintomasSelecionados.includes('XEROFTALMIA')) {
                sugestoes.push("üü¢ S√≠ndrome de Sj√∂gren (poss√≠vel)");
            }

            document.getElementById('sugestaoHD').innerHTML = sugestoes.length > 0 ? 
                sugestoes.map(s => `‚Ä¢ ${s}`).join('<br>') : 
                '‚Ä¢ Nenhuma hip√≥tese espec√≠fica identificada.';
        }

        function gerarCondutaAutomatica() {
            const hipoteseDiv = document.getElementById('sugestaoHD').innerText;
            let conduta = [];
            
            conduta.push("üìã EXAMES A SOLICITAR:");
            conduta.push("‚Ä¢ Hemograma completo, VHS, PCR");
            conduta.push("‚Ä¢ FAN, FR");
            conduta.push("‚Ä¢ Fun√ß√£o renal e hep√°tica");
            
            if (hipoteseDiv.includes('Artrite Reumatoide')) {
                conduta.push("‚Ä¢ Anti-CCP, radiografias de m√£os e p√©s");
                conduta.push("‚Ä¢ Ultrassom de articula√ß√µes");
                conduta.push("\nüíä TRATAMENTO:");
                conduta.push("‚Ä¢ Metotrexate 7.5-15mg/sem + √°cido f√≥lico");
                conduta.push("‚Ä¢ Prednisona 5-10mg/dia se necess√°rio");
                conduta.push("‚Ä¢ Se falha: considerar biol√≥gico (anti-TNF)");
            } else if (hipoteseDiv.includes('L√∫pus')) {
                conduta.push("‚Ä¢ Anti-DNA, C3, C4, protein√∫ria 24h");
                conduta.push("‚Ä¢ EAS, fun√ß√£o renal");
                conduta.push("\nüíä TRATAMENTO:");
                conduta.push("‚Ä¢ Hidroxicloroquina 400mg/dia");
                conduta.push("‚Ä¢ Prednisona conforme atividade");
                conduta.push("‚Ä¢ Prote√ß√£o solar rigorosa");
            } else if (hipoteseDiv.includes('Espondiloartrite')) {
                conduta.push("‚Ä¢ HLA-B27");
                conduta.push("‚Ä¢ Radiografia de sacroil√≠acas");
                conduta.push("\nüíä TRATAMENTO:");
                conduta.push("‚Ä¢ AINE em dose plena");
                conduta.push("‚Ä¢ Se falha: considerar biol√≥gico (anti-TNF)");
            } else {
                conduta.push("\nüíä TRATAMENTO:");
                conduta.push("‚Ä¢ Tratamento sintom√°tico conforme hip√≥tese");
            }
            
            conduta.push("\nüìå RETORNO:");
            conduta.push("‚Ä¢ Retornar em 4 semanas com exames");
            
            document.getElementById('conduta').value = conduta.join('\n');
        }

        function gerarResumoCompleto() {
            let hda = [];
            
            // Dados do paciente
            const sexo = document.getElementById('sexo').value;
            const idade = document.getElementById('idade').value;
            const raca = document.getElementById('raca').value;
            const peso = document.getElementById('peso').value;
            const altura = document.getElementById('altura').value;
            const imc = document.getElementById('imc').innerText;
            const imcClass = document.getElementById('imcClass').innerText;
            
            let pacienteDesc = "Paciente";
            if (sexo === 'F') pacienteDesc += " do sexo feminino";
            else if (sexo === 'M') pacienteDesc += " do sexo masculino";
            if (raca) pacienteDesc += `, ${raca.toLowerCase()}`;
            if (idade) pacienteDesc += `, ${idade} anos`;
            if (peso && altura) {
                pacienteDesc += `, peso ${peso}kg, altura ${altura}cm, IMC ${imc} (${imcClass})`;
            }
            
            hda.push(pacienteDesc + ", " + (document.getElementById('queixaPrincipal').value || "sem queixa principal registrada") + "\n");
            
            // Sintomas com tempo
            let sintomasComTempo = [];
            document.querySelectorAll('#sinais .item-card').forEach(card => {
                const checkbox = card.querySelector('.sinal');
                if (checkbox && checkbox.checked) {
                    const sintoma = card.querySelector('label').innerText;
                    const tempoValor = card.querySelector('.tempo-valor')?.value;
                    const tempoUnidade = card.querySelector('.tempo-unidade')?.value;
                    
                    if (tempoValor && tempoUnidade) {
                        sintomasComTempo.push({
                            item: sintoma,
                            tempo: parseInt(tempoValor),
                            unidade: tempoUnidade
                        });
                    } else {
                        sintomasComTempo.push({
                            item: sintoma,
                            tempo: 999999,
                            unidade: 'dias'
                        });
                    }
                }
            });
            
            const tempoEmDias = (item) => {
                const dias = {'dias':1, 'semanas':7, 'meses':30, 'anos':365};
                return item.tempo * (dias[item.unidade] || 1);
            };
            
            sintomasComTempo.sort((a, b) => tempoEmDias(a) - tempoEmDias(b));
            
            if (sintomasComTempo.length > 0) {
                hda.push("\nüìÖ HIST√ìRIA CRONOL√ìGICA DOS SINTOMAS:");
                sintomasComTempo.forEach(item => {
                    if (item.tempo === 999999) {
                        hda.push(`‚Ä¢ ${item.item} (tempo n√£o especificado)`);
                    } else {
                        hda.push(`‚Ä¢ ${item.item} - h√° ${item.tempo} ${item.unidade}`);
                    }
                });
            }
            
            // Medicamentos com detalhes
            const medicamentos = [];
            document.querySelectorAll('#medicamentos .item-card').forEach(card => {
                const cb = card.querySelector('input[type="checkbox"]');
                if (cb && cb.checked) {
                    let nome = card.querySelector('label')?.innerText || card.querySelector('input[type="text"]')?.value || 'Medicamento';
                    const dose = card.querySelector('.med-dose')?.value;
                    const via = card.querySelector('.med-via')?.value;
                    const tempo = card.querySelector('.med-tempo')?.value;
                    const indicacao = card.querySelector('.med-indicacao')?.value;
                    
                    let detalhes = [];
                    if (via) detalhes.push(via);
                    if (dose) detalhes.push(dose);
                    if (tempo) detalhes.push(`uso: ${tempo}`);
                    if (indicacao) detalhes.push(`para: ${indicacao}`);
                    
                    let txt = nome;
                    if (detalhes.length > 0) txt += ` (${detalhes.join(', ')})`;
                    medicamentos.push(txt);
                }
            });
            
            if (medicamentos.length > 0) {
                hda.push("\nüíä MEDICAMENTOS EM USO:");
                hda.push(medicamentos.join('; '));
            }
            
            // Comorbidades com tempo
            const comorbidades = [];
            document.querySelectorAll('#comorbidades .item-card').forEach(card => {
                const cb = card.querySelector('input[type="checkbox"]');
                if (cb && cb.checked) {
                    let nome = card.querySelector('label').innerText;
                    const tempoValor = card.querySelector('.tempo-valor')?.value;
                    const tempoUnidade = card.querySelector('.tempo-unidade')?.value;
                    
                    if (tempoValor && tempoUnidade) {
                        comorbidades.push(`${nome} (diagn√≥stico h√° ${tempoValor} ${tempoUnidade})`);
                    } else {
                        comorbidades.push(nome);
                    }
                }
            });
            
            if (comorbidades.length > 0) {
                hda.push("\nüìã COMORBIDADES:");
                hda.push(comorbidades.join('; '));
            }
            
            // Antecedentes feminino
            if (sexo === 'F') {
                let antecedentes = [];
                if (document.getElementById('menopausa').checked) antecedentes.push("menopausa");
                if (document.getElementById('reposHorm').checked) antecedentes.push("reposi√ß√£o hormonal");
                if (document.getElementById('menstruacao').value) antecedentes.push(`menstrua√ß√£o ${document.getElementById('menstruacao').value.toLowerCase()}`);
                
                const g = document.getElementById('g').value;
                const p = document.getElementById('p').value;
                const a = document.getElementById('a').value;
                if (g || p || a) antecedentes.push(`G${g || '0'}P${p || '0'}A${a || '0'}`);
                
                if (antecedentes.length > 0) {
                    hda.push("\nüß¨ ANTECEDENTES GINECOL√ìGICOS:");
                    hda.push(antecedentes.join(', '));
                }
            }
            
            // Exame f√≠sico geral
            hda.push("\nü©ª EXAME F√çSICO:");
            const pa = document.getElementById('pa').value || 'N/I';
            const fc = document.getElementById('fc').value || 'N/I';
            const fr = document.getElementById('fr').value || 'N/I';
            const temp = document.getElementById('temp').value || 'N/I';
            hda.push(`PA: ${pa}, FC: ${fc} bpm, FR: ${fr} irpm, Temp: ${temp}¬∞C`);
            
            const ac = document.getElementById('ac').value;
            if (ac) hda.push(`AC: ${ac}`);
            
            const ap = document.getElementById('ap').value;
            if (ap) hda.push(`AP: ${ap}`);
            
            const abdome = document.getElementById('abdome').value;
            if (abdome) hda.push(`Abdome: ${abdome}`);
            
            // Exame f√≠sico reumatol√≥gico
            const articulacoes = document.getElementById('articulacoes').value;
            const forca = document.getElementById('forca').value;
            const deformidades = document.getElementById('deformidades').value;
            const nodulos = document.getElementById('nodulos').value;
            const derrame = document.getElementById('derrame').value;
            const marcha = document.getElementById('marcha').value;
            const edema = document.getElementById('edema').value;
            const pele = document.getElementById('pele').value;
            
            let exameReuma = [];
            if (articulacoes) exameReuma.push(`Articula√ß√µes: ${articulacoes}`);
            if (forca) exameReuma.push(`For√ßa: ${forca}`);
            if (deformidades) exameReuma.push(`Deformidades: ${deformidades}`);
            if (nodulos) exameReuma.push(`N√≥dulos: ${nodulos}`);
            if (derrame) exameReuma.push(`Derrame: ${derrame}`);
            if (marcha) exameReuma.push(`Marcha: ${marcha}`);
            if (edema) exameReuma.push(`Edema: ${edema}`);
            if (pele) exameReuma.push(`Pele: ${pele}`);
            
            if (exameReuma.length > 0) {
                hda.push("\nüî¨ EXAME REUMATOL√ìGICO:");
                hda.push(exameReuma.join('; '));
            }
            
            const extrem = document.getElementById('extrem').value;
            if (extrem) hda.push(`Extremidades: ${extrem}`);
            
            // Hip√≥tese
            hda.push("\nüîç HIP√ìTESE DIAGN√ìSTICA:");
            hda.push(document.getElementById('sugestaoHD').innerText.replace(/[‚Ä¢üî¥üü£üîµüü¢]/g, '').trim() || 'A definir');
            
            // Conduta
            hda.push("\nüìã CONDUTA:");
            hda.push(document.getElementById('conduta').value || 'A definir');
            
            const resumoDiv = document.getElementById('resumoFinal');
            resumoDiv.style.display = 'block';
            resumoDiv.innerText = hda.join('\n');
        }

        function toggleAll(sectionId, check) {
            const container = document.getElementById(sectionId);
            container.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                cb.checked = check;
                const card = cb.closest('.item-card');
                if (sectionId === 'medicamentos') {
                    const detalhesDiv = card?.querySelector('.med-detalhes');
                    if (detalhesDiv) detalhesDiv.style.display = check ? 'flex' : 'none';
                } else {
                    const tempoDiv = card?.querySelector('.tempo-controle');
                    if (tempoDiv) tempoDiv.style.display = check ? 'flex' : 'none';
                }
            });
            atualizarResumo();
            if (sectionId === 'sinais') atualizarHD();
        }

        function atualizarResumo() {
            const total = document.querySelectorAll('input[type="checkbox"]:checked').length;
            document.getElementById('totalMarcados').innerText = total;
            const queixa = document.getElementById('queixaPrincipal').value.trim();
            document.getElementById('resumoQueixa').innerText = queixa.substring(0, 30) + (queixa.length > 30 ? '...' : '') || '‚Äî';
        }

        function limparTudo() {
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.querySelectorAll('.tempo-controle, .med-detalhes').forEach(div => div.style.display = 'none');
            document.querySelectorAll('input[type="text"], input[type="number"], select, textarea').forEach(field => field.value = '');
            document.getElementById('sexo').value = '';
            document.getElementById('raca').value = '';
            document.getElementById('menstruacao').value = '';
            document.getElementById('imc').innerText = '-';
            document.getElementById('imcClass').innerText = '';
            atualizarResumo();
            atualizarHD();
            document.getElementById('resumoFinal').style.display = 'none';
            
            // Recria os medicamentos base (remove os "outros" adicionados)
            const medContainer = document.getElementById('medicamentos');
            let htmlMed = '';
            medicamentosBase.forEach(m => {
                htmlMed += `<div class="item-card">`;
                htmlMed += `<div class="item-header">`;
                htmlMed += `<input type="checkbox" class="med-check" onchange="toggleDetalhesMed(this)">`;
                htmlMed += `<label>${m.nome}</label>`;
                htmlMed += `</div>`;
                htmlMed += `<div class="med-group">`;
                if (m.opcoes) {
                    htmlMed += `<select class="med-via"><option>${m.opcoes.join('</option><option>')}</option></select>`;
                }
                htmlMed += `<input type="text" class="med-dose" placeholder="dose (${m.unidade})" style="width:120px;">`;
                htmlMed += `</div>`;
                htmlMed += `<div class="med-detalhes" style="display: none;">`;
                htmlMed += `<div class="campo-group"><label>Tempo de uso:</label><input type="text" class="med-tempo" placeholder="ex: 2 meses"></div>`;
                htmlMed += `<div class="campo-group"><label>Indica√ß√£o:</label><input type="text" class="med-indicacao" placeholder="ex: artrite reumatoide"></div>`;
                htmlMed += `</div>`;
                htmlMed += `</div>`;
            });
            medContainer.innerHTML = htmlMed;
        }

        window.onload = () => {
            gerarCheckboxes();
            document.addEventListener('change', () => {
                atualizarResumo();
                atualizarHD();
            });
        };
    </script>
</body>
</html>