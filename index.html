<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anamnese Reumatologia Inteligente</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f0f5f9;
            padding: 20px;
            color: #1e3c5c;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        h1 {
            color: #0a2942;
            margin-bottom: 20px;
            font-size: 2.2rem;
            border-bottom: 3px solid #4a90e2;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        h2 {
            background: #1e4a76;
            color: white;
            padding: 10px 15px;
            border-radius: 8px 8px 0 0;
            font-size: 1.3rem;
            margin-top: 20px;
            margin-bottom: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        h2 button {
            margin-left: auto;
            background: white;
            border: none;
            border-radius: 4px;
            padding: 4px 12px;
            font-size: 0.9rem;
            cursor: pointer;
            color: #1e4a76;
            font-weight: bold;
        }
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            background: #d9e6f2;
            padding: 15px;
            border-radius: 0 0 8px 8px;
            margin-bottom: 10px;
        }
        .item-card {
            background: white;
            border-radius: 8px;
            padding: 12px 15px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: 0.2s;
            border-left: 5px solid #4a90e2;
            flex-wrap: wrap;
        }
        .item-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transform: translateY(-2px);
        }
        .item-card input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #1e4a76;
        }
        .item-card label {
            font-weight: 600;
            cursor: pointer;
            flex-grow: 1;
            color: #0a2942;
            min-width: 120px;
        }
        .item-card input[type="text"], 
        .item-card input[type="number"] {
            border: 1px solid #b0c8da;
            border-radius: 4px;
            padding: 4px 8px;
            width: 90px;
            font-size: 0.9rem;
        }
        .item-card select {
            border: 1px solid #b0c8da;
            border-radius: 4px;
            padding: 4px;
            background: white;
        }
        .small-input {
            width: 70px !important;
        }
        .med-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
            width: 100%;
        }
        .double-col {
            grid-column: span 2;
        }
        .highlight {
            background-color: #fff9e0;
            border-left-color: #f5b042;
        }
        .footer-actions {
            margin-top: 30px;
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .btn {
            background: #1e4a76;
            color: white;
            border: none;
            padding: 12px 28px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .btn:hover {
            background: #0a2942;
            transform: scale(1.02);
        }
        .btn.secondary {
            background: #6c757d;
        }
        .btn.secondary:hover {
            background: #495057;
        }
        .btn.success {
            background: #28a745;
        }
        .btn.success:hover {
            background: #218838;
        }
        .resumo-bar {
            background: white;
            border-radius: 50px;
            padding: 15px 25px;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 1.1rem;
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
            align-items: center;
        }
        .resumo-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .badge {
            background: #1e4a76;
            color: white;
            border-radius: 20px;
            padding: 4px 16px;
            font-weight: 600;
        }
        hr {
            margin: 20px 0;
            border: 1px dashed #b0c8da;
        }
        .obs-field {
            background: white;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #b0c8da;
            margin-bottom: 15px;
        }
        textarea {
            width: 100%;
            border: 1px solid #b0c8da;
            border-radius: 8px;
            padding: 12px;
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
        }
        .paciente-info {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            align-items: flex-end;
        }
        .info-field {
            display: flex;
            flex-direction: column;
            gap: 5px;
            min-width: 120px;
        }
        .info-field label {
            font-weight: 600;
            color: #1e4a76;
        }
        .info-field input, .info-field select {
            padding: 8px;
            border: 1px solid #b0c8da;
            border-radius: 6px;
            font-size: 1rem;
        }
        .imc-result {
            background: #e8f4fd;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        .hd-box {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border-left: 8px solid #4a90e2;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .hd-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #1e4a76;
            margin-bottom: 15px;
        }
        .sugestao-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin: 5px 0;
            border-left: 3px solid #ffc107;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>
            ü©∫ Anamnese Reumatologia Inteligente
            <span style="font-size:1rem; font-weight:normal; color:#4a90e2; margin-left:auto;">Clique e marque durante a consulta</span>
        </h1>

        <!-- Dados do Paciente -->
        <div class="paciente-info">
            <div class="info-field">
                <label>Sexo:</label>
                <select id="sexo">
                    <option value="">Selecione</option>
                    <option value="F">Feminino</option>
                    <option value="M">Masculino</option>
                    <option value="Outro">Outro</option>
                </select>
            </div>
            <div class="info-field">
                <label>Idade (anos):</label>
                <input type="number" id="idade" min="0" max="120" step="1">
            </div>
            <div class="info-field">
                <label>Peso (kg):</label>
                <input type="number" id="peso" min="0" max="300" step="0.1" oninput="calcularIMC()">
            </div>
            <div class="info-field">
                <label>Altura (cm):</label>
                <input type="number" id="altura" min="0" max="250" step="1" oninput="calcularIMC()">
            </div>
            <div class="info-field">
                <label>IMC:</label>
                <div class="imc-result" id="imc">-</div>
            </div>
        </div>

        <!-- Resumo din√¢mico -->
        <div class="resumo-bar" id="resumo">
            <span class="resumo-item"><span class="badge" id="totalMarcados">0</span> itens marcados</span>
            <span class="resumo-item">üìå Queixa: <span id="resumoQueixa" style="font-weight:600;">‚Äî</span></span>
            <span class="resumo-item">‚öïÔ∏è HD: <span id="resumoHD" style="font-weight:600;">‚Äî</span></span>
        </div>

        <!-- QUEIXA PRINCIPAL / HDA -->
        <div class="obs-field">
            <label style="font-weight:700; font-size:1.2rem;">üó£Ô∏è Queixa Principal / Hist√≥ria da Doen√ßa Atual:</label>
            <textarea id="queixaPrincipal" rows="2" placeholder="Descreva a queixa principal e HDA..." oninput="atualizarResumo()"></textarea>
        </div>

        <!-- SINAIS E SINTOMAS (vers√£o leiga) -->
        <h2>üîç SINAIS E SINTOMAS <button onclick="toggleAll('sinais', true)">Marcar todos</button><button onclick="toggleAll('sinais', false)" style="background:#f0f0f0; color:#333;">Limpar</button></h2>
        <div class="card-grid" id="sinais"></div>

        <!-- MEDICAMENTOS EM USO -->
        <h2>üíä MEDICAMENTOS EM USO <button onclick="adicionarMedicamento()">+ Adicionar outro</button></h2>
        <div class="card-grid" id="medicamentos"></div>

        <!-- COMORBIDADES e HIST√ìRICO -->
        <h2>üìã COMORBIDADES / ANTECEDENTES</h2>
        <div class="card-grid" id="comorbidades"></div>

        <!-- EXAME F√çSICO -->
        <h2>ü©ª EXAME F√çSICO</h2>
        <div class="card-grid">
            <div class="item-card double-col">
                <label>PA:</label>
                <input type="text" placeholder="Ex: 120x80" id="pa" style="width:120px;">
                <label style="margin-left:15px;">FC:</label>
                <input type="text" placeholder="bpm" id="fc" style="width:80px;">
            </div>
            <div class="item-card double-col">
                <label>AC:</label>
                <input type="text" placeholder="RR 2T" id="ac" style="width:150px;">
                <label style="margin-left:15px;">AP:</label>
                <input type="text" placeholder="MV+ sem RA" id="ap" style="width:150px;">
            </div>
            <div class="item-card double-col">
                <label>Abdome:</label>
                <input type="text" placeholder="..." id="abdome" style="width:200px;">
                <label style="margin-left:15px;">Extremidades:</label>
                <input type="text" placeholder="Sem edema" id="extrem" style="width:150px;">
            </div>
        </div>

        <!-- HD Autom√°tica e Conduta -->
        <div class="hd-box" id="hdBox">
            <div class="hd-title">ü§ñ Sugest√£o de Hip√≥tese Diagn√≥stica (baseada nos sintomas)</div>
            <div id="sugestaoHD" class="sugestao-item">Preencha os sintomas para ver sugest√µes...</div>
            
            <div class="hd-title" style="margin-top:20px;">üìù Hip√≥tese Diagn√≥stica Final</div>
            <input type="text" id="hipotese" placeholder="Digite a hip√≥tese diagn√≥stica..." style="width:100%; padding:12px; border-radius:8px; border:1px solid #b0c8da; font-size:1rem; margin-bottom:20px;">
            
            <div class="hd-title">üí° Conduta Sugerida (baseada na HD)</div>
            <div id="sugestaoConduta" class="sugestao-item">Selecione uma hip√≥tese para ver sugest√µes de conduta...</div>
            
            <div class="hd-title" style="margin-top:20px;">üìã Conduta Final</div>
            <textarea id="conduta" rows="3" placeholder="Descreva a conduta final..."></textarea>
        </div>

        <!-- ANTECEDENTES FISIOL√ìGICOS -->
        <h2>üß¨ ANTECEDENTES FISIOL√ìGICOS</h2>
        <div class="card-grid">
            <div class="item-card"><input type="checkbox" id="menopausa"><label for="menopausa">Menopausa</label></div>
            <div class="item-card"><input type="checkbox" id="reposHorm"><label for="reposHorm">Reposi√ß√£o Hormonal</label></div>
            <div class="item-card">
                <label>Menstrua√ß√£o:</label>
                <select id="menstruacao">
                    <option value="">--</option>
                    <option>Regular</option>
                    <option>Irregular</option>
                </select>
            </div>
            <div class="item-card">
                <label>Gesta√ß√µes: G</label><input type="number" id="g" class="small-input" min="0">
                <label>P</label><input type="number" id="p" class="small-input" min="0">
                <label>A</label><input type="number" id="a" class="small-input" min="0">
            </div>
        </div>

        <!-- Bot√µes de a√ß√£o -->
        <div class="footer-actions">
            <button class="btn" onclick="gerarResumo()">üìã Gerar Resumo da Consulta</button>
            <button class="btn success" onclick="atualizarHD()">ü§ñ Atualizar Sugest√µes</button>
            <button class="btn secondary" onclick="limparTudo()">üîÑ Nova Consulta</button>
        </div>
        <div id="resumoFinal" style="margin-top:30px; background:#e9f0f9; padding:20px; border-radius:12px; display:none; white-space:pre-wrap; font-family:monospace;"></div>
    </div>

    <script>
        // Lista de sintomas em vers√£o t√©cnica e leiga
        const sintomasLista = [
            {tecnico: "RASH MALAR", leigo: "Vermelhid√£o no rosto (asa de borboleta)"},
            {tecnico: "FOTOSSENSIBILIDADE", leigo: "Pele sens√≠vel ao sol, manchas com exposi√ß√£o solar"},
            {tecnico: "ULCERAS ORAIS", leigo: "Feridas na boca ou nariz"},
            {tecnico: "SEROSITE", leigo: "Dor no peito ao respirar (pleurisia) ou incha√ßo no cora√ß√£o"},
            {tecnico: "ANEMIA", leigo: "Cansa√ßo, palidez, fraqueza"},
            {tecnico: "ARTRITE PEQUENAS ARTICULA√á√ïES", leigo: "Dor e incha√ßo nas m√£os, punhos ou p√©s"},
            {tecnico: "ARTRITE GRANDES ARTICULA√á√ïES", leigo: "Dor e incha√ßo nos joelhos, ombros ou quadris"},
            {tecnico: "RIGIDEZ MATINAL >30 MIN", leigo: "Dura√ß√£o do travamento ao acordar por mais de 30 minutos"},
            {tecnico: "RIGIDEZ MATINAL <30 MIN", leigo: "Travamento ao acordar que melhora r√°pido"},
            {tecnico: "LINFADENOPATIA", leigo: "√çnguas (caro√ßos no pesco√ßo, axilas ou virilha)"},
            {tecnico: "ALOP√âCIA DIFUSA", leigo: "Queda de cabelo generalizada"},
            {tecnico: "ALOP√âCIA AREATA", leigo: "Queda de cabelo em placas"},
            {tecnico: "HEMAT√öRIA", leigo: "Sangue na urina"},
            {tecnico: "CONVULS√ÉO", leigo: "Crises convulsivas"},
            {tecnico: "CEFAL√âIA", leigo: "Dor de cabe√ßa frequente ou intensa"},
            {tecnico: "RAYNAUD", leigo: "Dedos das m√£os/p√©s ficam roxos/brancos no frio"},
            {tecnico: "XEROSTOMIA", leigo: "Boca seca constante"},
            {tecnico: "XEROFTALMIA", leigo: "Olhos secos, areia nos olhos"},
            {tecnico: "PAROTIDITE", leigo: "Incha√ßo nas gl√¢ndulas perto do maxilar (caxumba)"},
            {tecnico: "PARESTESIAS", leigo: "Formigamento, dorm√™ncia nas m√£os ou p√©s"},
            {tecnico: "PET√âQUIAS", leigo: "Pequenas manchas vermelhas na pele (puntiformes)"},
            {tecnico: "PSOR√çASE", leigo: "Manchas vermelhas com descama√ß√£o na pele"},
            {tecnico: "OUTRAS LES√ïES CUT√ÇNEAS", leigo: "Outras manchas ou feridas na pele"},
            {tecnico: "FEBRE", leigo: "Febre sem causa aparente"},
            {tecnico: "EMAGRECIMENTO", leigo: "Perda de peso sem dieta"},
            {tecnico: "LOMBALGIA INFLAMAT√ìRIA", leigo: "Dor nas costas que piora com descanso, melhora com movimento"},
            {tecnico: "LOMBALGIA MEC√ÇNICA", leigo: "Dor nas costas ao esfor√ßo, melhora com repouso"},
            {tecnico: "UVE√çTE", leigo: "Olho vermelho, doloroso e com fotofobia"},
            {tecnico: "OUTRAS LES√ïES OCULARES", leigo: "Outros problemas nos olhos"},
            {tecnico: "FRAQUEZA MUSCULAR", leigo: "Dificuldade para levantar bra√ßos ou pernas"},
            {tecnico: "DISPN√âIA", leigo: "Falta de ar"},
            {tecnico: "DISFAGIA", leigo: "Dificuldade para engolir"},
            {tecnico: "TROMBOSE VENOSA", leigo: "Dor e incha√ßo na perna (trombose)"},
            {tecnico: "TROMBOSE ARTERIAL", leigo: "Infarto ou derrame por co√°gulo"}
        ];

        const medicamentosBase = [
            { nome: "PREDNISONA", unidade: "mg/dia" },
            { nome: "DEFLAZACORT", unidade: "mg/dia" },
            { nome: "METOTREXATE", opcoes: ["VO", "SC"], unidade: "mg/sem" },
            { nome: "LEFLUNOMIDA", unidade: "mg/dia" },
            { nome: "AZATIOPRINA", unidade: "mg/dia" },
            { nome: "SULFASSALAZINA", unidade: "mg/dia" },
            { nome: "CLOROQUINA", unidade: "mg/dia" },
            { nome: "HIDROXICLOROQUINA", unidade: "mg/dia" },
            { nome: "C√ÅLCIO", unidade: "mg/dia" },
            { nome: "VITAMINA D", unidade: "UI/dia" },
            { nome: "ANTI-INFLAMAT√ìRIO (AINE)", unidade: "mg/dia" },
            { nome: "GLUCOSAMINA", unidade: "mg/dia" },
            { nome: "CONDROITINA", unidade: "mg/dia" },
            { nome: "DIACERE√çNA", unidade: "mg/dia" },
            { nome: "AAS", unidade: "mg/dia" },
            { nome: "ANTI-HIPERTENSIVO", unidade: "mg/dia" },
            { nome: "ADALIMUMABE", unidade: "mg" },
            { nome: "ETANERCEPTE", unidade: "mg" },
            { nome: "INFLIXIMABE", unidade: "mg/kg" },
            { nome: "RITUXIMABE", unidade: "mg" },
            { nome: "TOCILIZUMABE", unidade: "mg" }
        ];

        const comorbidadesLista = [
            "HAS (Hipertens√£o)", "DM (Diabetes)", "Dislipidemia", "Osteoporose", 
            "Osteoporose com fratura", "Artrose", "Gota", "Fibromialgia",
            "Tireoidite de Hashimoto", "S√≠ndrome de Sj√∂gren", "S√≠ndrome antifosfol√≠pide",
            "Infec√ß√µes urin√°rias de repeti√ß√£o", "Ansiedade", "Depress√£o", 
            "Sono n√£o restaurador", "Nefrolit√≠ase (pedra nos rins)", "C√¢ncer (pr√©vio)",
            "Enxaqueca", "IAM (infarto)", "AVC", "Tabagismo", "Etilismo",
            "Drogas il√≠citas", "Drogas injet√°veis"
        ];

        function gerarCheckboxes() {
            let htmlSinais = '';
            sintomasLista.forEach(s => {
                htmlSinais += `<div class="item-card"><input type="checkbox" class="sinal" data-tecnico="${s.tecnico}" onchange="atualizarHD()"><label title="${s.tecnico}">${s.leigo}</label></div>`;
            });
            document.getElementById('sinais').innerHTML = htmlSinais;

            atualizarMedicamentos();
            
            let htmlComorb = '';
            comorbidadesLista.forEach(c => {
                htmlComorb += `<div class="item-card"><input type="checkbox" class="comorb"><label>${c}</label></div>`;
            });
            document.getElementById('comorbidades').innerHTML = htmlComorb;
        }

        function atualizarMedicamentos() {
            let htmlMed = '';
            medicamentosBase.forEach(m => {
                htmlMed += `<div class="item-card">`;
                htmlMed += `<input type="checkbox" class="med-check">`;
                htmlMed += `<label>${m.nome}</label>`;
                htmlMed += `<div class="med-group">`;
                if (m.opcoes) {
                    htmlMed += `<select class="med-via"><option>${m.opcoes.join('</option><option>')}</option></select>`;
                }
                htmlMed += `<input type="text" class="med-dose" placeholder="dose (${m.unidade || ''})" style="width:100px;">`;
                htmlMed += `</div></div>`;
            });
            document.getElementById('medicamentos').innerHTML = htmlMed;
        }

        function adicionarMedicamento() {
            const container = document.getElementById('medicamentos');
            const div = document.createElement('div');
            div.className = 'item-card';
            div.innerHTML = `
                <input type="checkbox" class="med-check">
                <input type="text" placeholder="Nome do medicamento" style="flex-grow:1;">
                <input type="text" placeholder="dose" style="width:80px;">
                <button onclick="this.parentElement.remove()" style="background:#dc3545; color:white; border:none; border-radius:4px; padding:2px 8px;">‚úï</button>
            `;
            container.appendChild(div);
        }

        function calcularIMC() {
            const peso = parseFloat(document.getElementById('peso').value);
            const altura = parseFloat(document.getElementById('altura').value) / 100; // converte cm para m
            if (peso && altura && altura > 0) {
                const imc = peso / (altura * altura);
                document.getElementById('imc').innerText = imc.toFixed(2);
            } else {
                document.getElementById('imc').innerText = '-';
            }
        }

        function atualizarHD() {
            const sintomasSelecionados = [];
            document.querySelectorAll('#sinais input:checked').forEach(cb => {
                const tec = cb.getAttribute('data-tecnico');
                if (tec) sintomasSelecionados.push(tec);
            });

            // L√≥gica de sugest√£o de HD baseada nos sintomas
            let sugestoes = [];
            
            // Crit√©rios para AR (Artrite Reumatoide)
            if (sintomasSelecionados.includes('ARTRITE PEQUENAS ARTICULA√á√ïES') && 
                sintomasSelecionados.includes('RIGIDEZ MATINAL >30 MIN')) {
                sugestoes.push("üî¥ Artrite Reumatoide (prov√°vel) - considerar FAN, FR, anti-CCP");
            }
            
            // Crit√©rios para LES (L√∫pus)
            let pontosLES = 0;
            if (sintomasSelecionados.includes('RASH MALAR')) pontosLES += 2;
            if (sintomasSelecionados.includes('FOTOSSENSIBILIDADE')) pontosLES += 1;
            if (sintomasSelecionados.includes('ULCERAS ORAIS')) pontosLES += 1;
            if (sintomasSelecionados.includes('ARTRITE PEQUENAS ARTICULA√á√ïES')) pontosLES += 1;
            if (sintomasSelecionados.includes('SEROSITE')) pontosLES += 2;
            if (sintomasSelecionados.includes('CONVULS√ÉO')) pontosLES += 2;
            if (sintomasSelecionados.includes('HEMAT√öRIA')) pontosLES += 2;
            
            if (pontosLES >= 4) {
                sugestoes.push("üü£ L√∫pus Eritematoso Sist√™mico (prov√°vel) - considerar FAN, anti-DNA, complemento");
            } else if (pontosLES >= 2) {
                sugestoes.push("üü£ L√∫pus Eritematoso Sist√™mico (poss√≠vel) - investigar");
            }
            
            // Espondiloartrites
            if (sintomasSelecionados.includes('LOMBALGIA INFLAMAT√ìRIA') && 
                (sintomasSelecionados.includes('UVE√çTE') || sintomasSelecionados.includes('PSOR√çASE'))) {
                sugestoes.push("üîµ Espondiloartrite (poss√≠vel) - considerar HLA-B27, sacroilite em exames");
            } else if (sintomasSelecionados.includes('LOMBALGIA INFLAMAT√ìRIA')) {
                sugestoes.push("üîµ Espondilite Anquilosante? Investigar");
            }
            
            // S√≠ndrome de Sj√∂gren
            if (sintomasSelecionados.includes('XEROSTOMIA') && sintomasSelecionados.includes('XEROFTALMIA')) {
                sugestoes.push("üü¢ S√≠ndrome de Sj√∂gren (prov√°vel) - considerar FAN, anti-Ro/La");
            }
            
            // Fen√¥meno de Raynaud isolado
            if (sintomasSelecionados.includes('RAYNAUD') && !sintomasSelecionados.includes('RASH MALAR') && pontosLES < 2) {
                sugestoes.push("‚ö™ Fen√¥meno de Raynaud prim√°rio (se isolado, sem outras queixas)");
            }
            
            // Vasculites
            if (sintomasSelecionados.includes('PET√âQUIAS') || sintomasSelecionados.includes('HEMAT√öRIA')) {
                sugestoes.push("üü° Poss√≠vel vasculite - considerar ANCA, bi√≥psia");
            }
            
            // Febre reum√°tica
            if (sintomasSelecionados.includes('ARTRITE GRANDES ARTICULA√á√ïES') && sintomasSelecionados.includes('FEBRE')) {
                sugestoes.push("üü† Febre reum√°tica? (Crit√©rios de Jones)");
            }
            
            // Gota
            if (sintomasSelecionados.includes('ARTRITE GRANDES ARTICULA√á√ïES') && 
                document.querySelector('#comorbidades input[value*="Gota"]')) {
                sugestoes.push("‚ö´ Crise de Gota (prov√°vel) - dosar √°cido √∫rico");
            }
            
            // Fibromialgia (diagn√≥stico diferencial)
            if (sintomasSelecionados.includes('CEFAL√âIA') && 
                sintomasSelecionados.includes('PARESTESIAS') &&
                document.querySelector('#comorbidades input[value*="Fibromialgia"]')) {
                sugestoes.push("‚ö™ Fibromialgia - considerar dor generalizada, pontos gatilho");
            }

            let hdSugestao = document.getElementById('sugestaoHD');
            if (sugestoes.length > 0) {
                hdSugestao.innerHTML = sugestoes.map(s => `‚Ä¢ ${s}`).join('<br>');
            } else {
                hdSugestao.innerHTML = '‚Ä¢ Nenhuma hip√≥tese espec√≠fica identificada. Considere colagenose indiferenciada ou doen√ßas mais comuns.';
            }

            atualizarConduta();
            atualizarResumo();
        }

        function atualizarConduta() {
            const hipotese = document.getElementById('hipotese').value;
            let sugestoes = [];
            
            if (hipotese.toLowerCase().includes('artrite reumatoide') || hipotese.toLowerCase().includes('ar')) {
                sugestoes = [
                    "üî¥ Iniciar ou ajustar DMARD (Metotrexate, Leflunomida)",
                    "üî¥ Considerar cortic√≥ide em baixa dose (prednisona ‚â§10mg/dia) por curto per√≠odo",
                    "üî¥ Avaliar necessidade de biol√≥gico se falha terap√™utica",
                    "üî¥ Solicitar: FAN, FR, anti-CCP, VHS, PCR, radiografias m√£os/p√©s",
                    "üî¥ Encaminhar √† fisioterapia e terapia ocupacional"
                ];
            } else if (hipotese.toLowerCase().includes('l√∫pus') || hipotese.toLowerCase().includes('les')) {
                sugestoes = [
                    "üü£ Iniciar hidroxicloroquina 400mg/dia (base do tratamento)",
                    "üü£ Avaliar necessidade de cortic√≥ide conforme atividade",
                    "üü£ Se grave (nefrite, neurol√≥gico): considerar pulsoterapia + imunossupressor",
                    "üü£ Solicitar: FAN, anti-DNA, C3/C4, protein√∫ria 24h, hemograma completo",
                    "üü£ Prote√ß√£o solar rigorosa, vacina√ß√£o em dia"
                ];
            } else if (hipotese.toLowerCase().includes('espondilo') || hipotese.toLowerCase().includes('espondilite')) {
                sugestoes = [
                    "üîµ Iniciar AINE em dose plena (primeira linha)",
                    "üîµ Se falha: considerar biol√≥gico (anti-TNF)",
                    "üîµ Fisioterapia para manter mobilidade",
                    "üîµ Solicitar: HLA-B27, radiografia de sacroil√≠acas, RM se necess√°rio"
                ];
            } else if (hipotese.toLowerCase().includes('sj√∂gren')) {
                sugestoes = [
                    "üü¢ L√°grimas artificiais e saliva artificial",
                    "üü¢ Hidroxicloroquina para manifesta√ß√µes sist√™micas",
                    "üü¢ Pilocarpina se xerostomia intensa",
                    "üü¢ Solicitar: FAN, anti-Ro/La, bi√≥psia de gl√¢ndula salivar se d√∫vida"
                ];
            } else if (hipotese.toLowerCase().includes('gota')) {
                sugestoes = [
                    "‚ö´ Tratar crise: colchicina, AINE ou cortic√≥ide",
                    "‚ö´ Ap√≥s crise: iniciar hipouricemiante (alopurinol) se indicado",
                    "‚ö´ Dieta: reduzir purinas, √°lcool, frutose",
                    "‚ö´ Solicitar: √°cido √∫rico s√©rico, uricos√∫ria 24h"
                ];
            } else if (hipotese.toLowerCase().includes('fibromialgia')) {
                sugestoes = [
                    "‚ö™ Tratamento multidisciplinar",
                    "‚ö™ Atividade f√≠sica regular (aer√≥bico, alongamento)",
                    "‚ö™ Medicamentos: amitriptilina, duloxetina, pregabalina",
                    "‚ö™ Terapia cognitivo-comportamental"
                ];
            } else {
                sugestoes = [
                    "‚Ä¢ Investigar conforme hip√≥tese principal",
                    "‚Ä¢ Solicitar exames gerais: hemograma, VHS, PCR, FAN, FR",
                    "‚Ä¢ Considerar encaminhamento ao reumatologista"
                ];
            }
            
            document.getElementById('sugestaoConduta').innerHTML = sugestoes.map(s => `‚Ä¢ ${s}`).join('<br>');
            document.getElementById('resumoHD').innerText = hipotese.substring(0,30) + (hipotese.length>30?'...':'') || '‚Äî';
        }

        function toggleAll(sectionId, check) {
            const container = document.getElementById(sectionId);
            const checkboxes = container.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(cb => cb.checked = check);
            atualizarHD();
            atualizarResumo();
        }

        function atualizarResumo() {
            const total = document.querySelectorAll('input[type="checkbox"]:checked').length;
            document.getElementById('totalMarcados').innerText = total;
            const queixa = document.getElementById('queixaPrincipal').value.trim();
            document.getElementById('resumoQueixa').innerText = queixa.substring(0,30) + (queixa.length>30?'...':'') || '‚Äî';
            const hipotese = document.getElementById('hipotese').value.trim();
            document.getElementById('resumoHD').innerText = hipotese.substring(0,20) + (hipotese.length>20?'...':'') || '‚Äî';
        }

        function gerarResumo() {
            let linhas = [];
            linhas.push('==== RESUMO DA CONSULTA ====\n');
            
            // Dados do paciente
            linhas.push('üìã DADOS DO PACIENTE:');
            linhas.push(`Sexo: ${document.getElementById('sexo').value || 'N√£o informado'}`);
            linhas.push(`Idade: ${document.getElementById('idade').value || 'N√£o informada'} anos`);
            linhas.push(`Peso: ${document.getElementById('peso').value || 'N√£o informado'} kg`);
            linhas.push(`Altura: ${document.getElementById('altura').value || 'N√£o informada'} cm`);
            linhas.push(`IMC: ${document.getElementById('imc').innerText}\n`);
            
            linhas.push('üó£Ô∏è QUEIXA PRINCIPAL:');
            linhas.push(document.getElementById('queixaPrincipal').value || 'N√£o informada\n');
            
            linhas.push('üîç SINAIS E SINTOMAS POSITIVOS:');
            let sintomas = [];
            document.querySelectorAll('#sinais input:checked').forEach(cb => {
                sintomas.push(cb.parentElement.querySelector('label').innerText);
            });
            linhas.push(sintomas.join('; ') || 'Nenhum\n');
            
            linhas.push('\nüíä MEDICAMENTOS EM USO:');
            let meds = [];
            document.querySelectorAll('#medicamentos .item-card').forEach(card => {
                const cb = card.querySelector('input[type="checkbox"]');
                if (cb && cb.checked) {
                    let nome = card.querySelector('label')?.innerText || card.querySelector('input[type="text"]')?.value || '';
                    const dose = card.querySelector('.med-dose, input[type="text"]:not([placeholder*="Nome"])')?.value;
                    const via = card.querySelector('select')?.value;
                    if (nome) {
                        let txt = nome;
                        if (via) txt += ' ' + via;
                        if (dose) txt += ' ' + dose;
                        meds.push(txt);
                    }
                }
            });
            linhas.push(meds.join('; ') || 'Nenhum\n');
            
            linhas.push('\nüìã COMORBIDADES:');
            let com = [];
            document.querySelectorAll('#comorbidades input:checked').forEach(cb => {
                com.push(cb.parentElement.querySelector('label').innerText);
            });
            linhas.push(com.join('; ') || 'Nenhuma\n');
            
            linhas.push('\nü©ª EXAME F√çSICO:');
            linhas.push(`PA: ${document.getElementById('pa').value || 'N/I'}, FC: ${document.getElementById('fc').value || 'N/I'}`);
            linhas.push(`AC: ${document.getElementById('ac').value || 'N/I'}`);
            linhas.push(`AP: ${document.getElementById('ap').value || 'N/I'}`);
            linhas.push(`Abdome: ${document.getElementById('abdome').value || 'N/I'}`);
            linhas.push(`Extremidades: ${document.getElementById('extrem').value || 'N/I'}\n`);
            
            linhas.push('ü§ñ HIP√ìTESE DIAGN√ìSTICA:');
            linhas.push(document.getElementById('hipotese').value || 'N√£o informada\n');
            
            linhas.push('üìù CONDUTA:');
            linhas.push(document.getElementById('conduta').value || 'N√£o informada\n');
            
            linhas.push('\nüß¨ ANTECEDENTES FISIOL√ìGICOS:');
            if(document.getElementById('menopausa').checked) linhas.push('Menopausa');
            if(document.getElementById('reposHorm').checked) linhas.push('Reposi√ß√£o Hormonal');
            linhas.push(`Menstrua√ß√£o: ${document.getElementById('menstruacao').value || 'N/I'}`);
            linhas.push(`G:${document.getElementById('g').value || '0'} P:${document.getElementById('p').value || '0'} A:${document.getElementById('a').value || '0'}`);

            const resumoDiv = document.getElementById('resumoFinal');
            resumoDiv.style.display = 'block';
            resumoDiv.innerText = linhas.join('\n');
        }

        function limparTudo() {
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.querySelectorAll('input[type="text"], input[type="number"], select, textarea').forEach(field => field.value = '');
            document.getElementById('sexo').value = '';
            document.getElementById('menstruacao').value = '';
            document.getElementById('imc').innerText = '-';
            atualizarMedicamentos();
            atualizarHD();
            atualizarResumo();
            document.getElementById('resumoFinal').style.display = 'none';
        }

        // Inicializa√ß√£o e listeners
        window.onload = () => {
            gerarCheckboxes();
            document.addEventListener('change', () => {
                atualizarResumo();
                atualizarHD();
            });
            document.addEventListener('input', () => {
                atualizarResumo();
                if (event.target.id === 'hipotese') {
                    atualizarConduta();
                }
            });
        };
    </script>
</body>
</html>
